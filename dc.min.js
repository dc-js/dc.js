/*!
 *  dc 2.1.0-dev
 *  http://dc-js.github.io/dc.js/
 *  Copyright 2012-2015 Nick Zhu & the dc.js Developers
 *  https://github.com/dc-js/dc.js/blob/master/AUTHORS
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

!function(){function a(a,b){"use strict";var c={version:"2.1.0-dev",constants:{CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},_renderlet:null};c.chartRegistry=function(){function a(a){return a||(a=c.constants.DEFAULT_CHART_GROUP),b[a]||(b[a]=[]),a}var b={};return{has:function(a){for(var c in b)if(b[c].indexOf(a)>=0)return!0;return!1},register:function(c,d){d=a(d),b[d].push(c)},deregister:function(c,d){d=a(d);for(var e=0;e<b[d].length;e++)if(b[d][e].anchorName()===c.anchorName()){b[d].splice(e,1);break}},clear:function(a){a?delete b[a]:b={}},list:function(c){return c=a(c),b[c]}}}(),c.registerChart=function(a,b){c.chartRegistry.register(a,b)},c.deregisterChart=function(a,b){c.chartRegistry.deregister(a,b)},c.hasChart=function(a){return c.chartRegistry.has(a)},c.deregisterAllCharts=function(a){c.chartRegistry.clear(a)},c.filterAll=function(a){for(var b=c.chartRegistry.list(a),d=0;d<b.length;++d)b[d].filterAll()},c.refocusAll=function(a){for(var b=c.chartRegistry.list(a),d=0;d<b.length;++d)b[d].focus&&b[d].focus()},c.renderAll=function(a){for(var b=c.chartRegistry.list(a),d=0;d<b.length;++d)b[d].render();null!==c._renderlet&&c._renderlet(a)},c.redrawAll=function(a){for(var b=c.chartRegistry.list(a),d=0;d<b.length;++d)b[d].redraw();null!==c._renderlet&&c._renderlet(a)},c.disableTransitions=!1,c.transition=function(a,b,d,e){if(0>=b||void 0===b||c.disableTransitions)return a;var f=a.transition(e).duration(b);return"function"==typeof d&&d(f),f},c.optionalTransition=function(a,b,d,e){return a?function(a){return c.transition(a,b,d,e)}:function(a){return a}},c.afterTransition=function(a,b){if(a.empty()||!a.duration)b.call(a);else{var c=0;a.each(function(){++c}).each("end",function(){--c||b.call(a)})}},c.units={},c.units.integers=function(a,b){return Math.abs(b-a)},c.units.ordinal=function(a,b,c){return c},c.units.fp={},c.units.fp.precision=function(a){var b=function(a,d){var e=Math.abs((d-a)/b.resolution);return c.utils.isNegligible(e-Math.floor(e))?Math.floor(e):Math.ceil(e)};return b.resolution=a,b},c.round={},c.round.floor=function(a){return Math.floor(a)},c.round.ceil=function(a){return Math.ceil(a)},c.round.round=function(a){return Math.round(a)},c.override=function(a,b,c){var d=a[b];a["_"+b]=d,a[b]=c},c.renderlet=function(a){return arguments.length?(c._renderlet=a,c):c._renderlet},c.instanceOfChart=function(a){return a instanceof Object&&a.__dcFlag__&&!0},c.errors={},c.errors.Exception=function(a){var b=a||"Unexpected internal error";this.message=b,this.toString=function(){return b},this.stack=(new Error).stack},c.errors.Exception.prototype=Object.create(Error.prototype),c.errors.Exception.prototype.constructor=c.errors.Exception,c.errors.InvalidStateException=function(){c.errors.Exception.apply(this,arguments)},c.errors.InvalidStateException.prototype=Object.create(c.errors.Exception.prototype),c.errors.InvalidStateException.prototype.constructor=c.errors.InvalidStateException,c.errors.BadArgumentException=function(){c.errors.Exception.apply(this,arguments)},c.errors.BadArgumentException.prototype=Object.create(c.errors.Exception.prototype),c.errors.BadArgumentException.prototype.constructor=c.errors.BadArgumentException,c.dateFormat=a.time.format("%m/%d/%Y"),c.printers={},c.printers.filters=function(a){for(var b="",d=0;d<a.length;++d)d>0&&(b+=", "),b+=c.printers.filter(a[d]);return b},c.printers.filter=function(a){var b="";return"undefined"!=typeof a&&null!==a&&(a instanceof Array?a.length>=2?b="["+c.utils.printSingleValue(a[0])+" -> "+c.utils.printSingleValue(a[1])+"]":a.length>=1&&(b=c.utils.printSingleValue(a[0])):b=c.utils.printSingleValue(a)),b},c.pluck=function(a,b){return b?function(c,d){return b.call(c,c[a],d)}:function(b){return b[a]}},c.utils={},c.utils.printSingleValue=function(a){var b=""+a;return a instanceof Date?b=c.dateFormat(a):"string"==typeof a?b=a:c.utils.isFloat(a)?b=c.utils.printSingleValue.fformat(a):c.utils.isInteger(a)&&(b=Math.round(a)),b},c.utils.printSingleValue.fformat=a.format(".2f"),c.utils.add=function(a,b){if("string"==typeof b&&(b=b.replace("%","")),a instanceof Date){"string"==typeof b&&(b=+b);var c=new Date;return c.setTime(a.getTime()),c.setDate(a.getDate()+b),c}if("string"==typeof b){var d=+b/100;return a>0?a*(1+d):a*(1-d)}return a+b},c.utils.subtract=function(a,b){if("string"==typeof b&&(b=b.replace("%","")),a instanceof Date){"string"==typeof b&&(b=+b);var c=new Date;return c.setTime(a.getTime()),c.setDate(a.getDate()-b),c}if("string"==typeof b){var d=+b/100;return 0>a?a*(1+d):a*(1-d)}return a-b},c.utils.isNumber=function(a){return a===+a},c.utils.isFloat=function(a){return a===+a&&a!==(0|a)},c.utils.isInteger=function(a){return a===+a&&a===(0|a)},c.utils.isNegligible=function(a){return!c.utils.isNumber(a)||a<c.constants.NEGLIGIBLE_NUMBER&&a>-c.constants.NEGLIGIBLE_NUMBER},c.utils.clamp=function(a,b,c){return b>a?b:a>c?c:a};var d=0;return c.utils.uniqueId=function(){return++d},c.utils.nameToId=function(a){return a.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},c.utils.appendOrSelect=function(a,b,c){c=c||b;var d=a.select(b);return d.empty()&&(d=a.append(c)),d},c.utils.safeNumber=function(a){return c.utils.isNumber(+a)?+a:0},c.logger={},c.logger.enableDebugLog=!1,c.logger.warn=function(a){return console&&(console.warn?console.warn(a):console.log&&console.log(a)),c.logger},c.logger.debug=function(a){return c.logger.enableDebugLog&&console&&(console.debug?console.debug(a):console.log&&console.log(a)),c.logger},c.logger.deprecate=function(a,b){function d(){return e||(c.logger.warn(b),e=!0),a.apply(this,arguments)}var e=!1;return d},c.events={current:null},c.events.trigger=function(a,b){return b?(c.events.current=a,void setTimeout(function(){a===c.events.current&&a()},b)):void a()},c.filters={},c.filters.RangedFilter=function(a,b){var c=new Array(a,b);return c.isFiltered=function(a){return a>=this[0]&&a<this[1]},c.filterType="RangedFilter",c},c.filters.TwoDimensionalFilter=function(a){if(null===a)return null;var b=a;return b.isFiltered=function(a){return a.length&&a.length===b.length&&a[0]===b[0]&&a[1]===b[1]},b.filterType="TwoDimensionalFilter",b},c.filters.RangedTwoDimensionalFilter=function(a){if(null===a)return null;var b,c=a;return b=c[0]instanceof Array?[[Math.min(a[0][0],a[1][0]),Math.min(a[0][1],a[1][1])],[Math.max(a[0][0],a[1][0]),Math.max(a[0][1],a[1][1])]]:[[a[0],-(1/0)],[a[1],1/0]],c.isFiltered=function(a){var c,d;if(a instanceof Array){if(2!==a.length)return!1;c=a[0],d=a[1]}else c=a,d=b[0][1];return c>=b[0][0]&&c<b[1][0]&&d>=b[0][1]&&d<b[1][1]},c.filterType="RangedTwoDimensionalFilter",c},c.baseMixin=function(d){function e(){d.root()&&d.root().style("width",d.width()).style("height",d.height())}function f(){return m=d.root().append("svg"),e(),m}function g(a){if(!d[a]||!d[a]())throw new c.errors.InvalidStateException("Mandatory attribute chart."+a+" is missing on chart[#"+d.anchorName()+"]")}function h(a){if(d.dimension()&&d.dimension().filter){var b=M(d.dimension(),a);b&&(a=b)}return a}d.__dcFlag__=c.utils.uniqueId();var i,j,k,l,m,n,o,p,q,r=200,s=function(a){var b=a&&a.getBoundingClientRect&&a.getBoundingClientRect().width;return b&&b>r?b:r},t=s,u=200,v=function(a){var b=a&&a.getBoundingClientRect&&a.getBoundingClientRect().height;return b&&b>u?b:u},w=v,x=c.pluck("key"),y=c.pluck("value"),z=c.pluck("key"),A=c.pluck("key"),B=!0,C=!1,D=function(a){return"<b>"+d.keyAccessor()(a)+":</b> "+d.valueAccessor()(a)},E=!0,F=!1,G=750,H=c.printers.filters,I=["dimension","group"],J=c.constants.DEFAULT_CHART_GROUP,K=a.dispatch("preRender","postRender","preRedraw","postRedraw","filtered","zoomed","renderlet","pretransition"),L=[],M=function(a,b){return 0===b.length?a.filter(null):1!==b.length||b[0].isFiltered?1===b.length&&"RangedFilter"===b[0].filterType?a.filterRange(b[0]):a.filterFunction(function(a){for(var c=0;c<b.length;c++){var d=b[c];if(d.isFiltered&&d.isFiltered(a))return!0;if(a>=d&&d>=a)return!0}return!1}):a.filterExact(b[0]),b},N=function(a){return a.all()};d.height=function(b){return arguments.length?(w=a.functor(b||v),l.style("height",w),d):l.node().getBoundingClientRect().height},d.width=function(b){return arguments.length?(t=a.functor(b||s),l.style("width",t),d):l.node().getBoundingClientRect().width},d.minWidth=function(a){return arguments.length?(r=a,d):r},d.minHeight=function(a){return arguments.length?(u=a,d):u},d.dimension=function(a){return arguments.length?(i=a,d.expireCache(),d):i},d.data=function(b){return arguments.length?(N=a.functor(b),d.expireCache(),d):N.call(d,j)},d.group=function(a,b){return arguments.length?(j=a,d._groupName=b,d.expireCache(),d):j},d.ordering=function(a){return arguments.length?(A=a,o=b.quicksort.by(A),d.expireCache(),d):A},d._computeOrderedGroups=function(a){var c=a.slice(0);return c.length<=1?c:(o||(o=b.quicksort.by(A)),o(c,0,c.length))},d.filterAll=function(){return d.filter(null)},d.select=function(a){return l.select(a)},d.selectAll=function(a){return l?l.selectAll(a):null},d.anchor=function(b,e){if(!arguments.length)return k;if(c.instanceOfChart(b))k=b.anchor(),l=b.root(),n=!0;else{if(!b)throw new c.errors.BadArgumentException("parent must be defined");k=b.select&&b.classed?b.node():b,l=a.select(k),l.classed(c.constants.CHART_CLASS,!0),c.registerChart(d,e),n=!1}return J=e,d},d.anchorName=function(){var a=d.anchor();return a&&a.id?a.id:a&&a.replace?a.replace("#",""):"dc-chart"+d.chartID()},d.root=function(a){return arguments.length?(l=a,d):l},d.svg=function(a){return arguments.length?(m=a,d):m},d.resetSvg=function(){return d.select("svg").remove(),f()},d.filterPrinter=function(a){return arguments.length?(H=a,d):H},d.controlsUseVisibility=function(a){return arguments.length?(F=a,d):F},d.turnOnControls=function(){if(l){var a=d.controlsUseVisibility()?"visibility":"display";d.selectAll(".reset").style(a,null),d.selectAll(".filter").text(H(d.filters())).style(a,null)}return d},d.turnOffControls=function(){if(l){var a=d.controlsUseVisibility()?"visibility":"display",b=d.controlsUseVisibility()?"hidden":"none";d.selectAll(".reset").style(a,b),d.selectAll(".filter").style(a,b).text(d.filter())}return d},d.transitionDuration=function(a){return arguments.length?(G=a,d):G},d._mandatoryAttributes=function(a){return arguments.length?(I=a,d):I},d.render=function(){K.preRender(d),I&&I.forEach(g);var a=d._doRender();return d._activateRenderlets("postRender"),a},d._activateRenderlets=function(a){K.pretransition(d),d.transitionDuration()>0&&m?m.transition().duration(d.transitionDuration()).each("end",function(){K.renderlet(d),a&&K[a](d)}):(K.renderlet(d),a&&K[a](d))},d.redraw=function(){e(),K.preRedraw(d);var a=d._doRedraw();return p&&p.render(),d._activateRenderlets("postRedraw"),a},d.commitHandler=function(a){return arguments.length?(q=a,d):q},d.redrawGroup=function(){return q?q(!1,function(a,b){a?console.log(a):c.redrawAll(d.chartGroup())}):c.redrawAll(d.chartGroup()),d},d.renderGroup=function(){return q?q(!1,function(a,b){a?console.log(a):c.renderAll(d.chartGroup())}):c.renderAll(d.chartGroup()),d},d._invokeFilteredListener=function(a){void 0!==a&&K.filtered(d,a)},d._invokeZoomedListener=function(){K.zoomed(d)};var O=function(a,b){return null===b||"undefined"==typeof b?a.length>0:a.some(function(a){return a>=b&&b>=a})};d.hasFilterHandler=function(a){return arguments.length?(O=a,d):O},d.hasFilter=function(a){return O(L,a)};var P=function(a,b){for(var c=0;c<a.length;c++)if(a[c]<=b&&a[c]>=b){a.splice(c,1);break}return a};d.removeFilterHandler=function(a){return arguments.length?(P=a,d):P};var Q=function(a,b){return a.push(b),a};d.addFilterHandler=function(a){return arguments.length?(Q=a,d):Q};var R=function(a){return[]};return d.resetFilterHandler=function(a){return arguments.length?(R=a,d):R},d.replaceFilter=function(a){L=[],d.filter(a)},d.filter=function(a){if(!arguments.length)return L.length>0?L[0]:null;var b=L;return a instanceof Array&&a[0]instanceof Array&&!a.isFiltered?a[0].forEach(function(a){b=O(b,a)?P(b,a):Q(b,a)}):b=null===a?R(b):O(b,a)?P(b,a):Q(b,a),L=h(b),d._invokeFilteredListener(a),null!==l&&d.hasFilter()?d.turnOnControls():d.turnOffControls(),d},d.filters=function(){return L},d.highlightSelected=function(b){a.select(b).classed(c.constants.SELECTED_CLASS,!0),a.select(b).classed(c.constants.DESELECTED_CLASS,!1)},d.fadeDeselected=function(b){a.select(b).classed(c.constants.SELECTED_CLASS,!1),a.select(b).classed(c.constants.DESELECTED_CLASS,!0)},d.resetHighlight=function(b){a.select(b).classed(c.constants.SELECTED_CLASS,!1),a.select(b).classed(c.constants.DESELECTED_CLASS,!1)},d.onClick=function(a){if(d.clickOn()){var b=d.keyAccessor()(a);c.events.trigger(function(){d.filter(b),d.redrawGroup()})}},d.filterHandler=function(a){return arguments.length?(M=a,d):M},d._doRender=function(){return d},d._doRedraw=function(){return d},d.legendables=function(){return[]},d.legendHighlight=function(){},d.legendReset=function(){},d.legendToggle=function(){},d.isLegendableHidden=function(){return!1},d.keyAccessor=function(a){return arguments.length?(x=a,d):x},d.valueAccessor=function(a){return arguments.length?(y=a,d):y},d.label=function(a,b){return arguments.length?(z=a,(void 0===b||b)&&(C=!0),d):z},d.renderLabel=function(a){return arguments.length?(C=a,d):C},d.title=function(a){return arguments.length?(D=a,d):D},d.renderTitle=function(a){return arguments.length?(E=a,d):E},d._attachTitle=function(a,b){a.on("mouseover",function(a,c){d._renderTitle(a,c,this,b)}).on("mouseleave",d._removeTitle)},d._renderTitle=function(b,e,f,g){var h=b;b.data&&(h=b.data);var i=a.select(".dc-title"),j=!i.empty();j||(i=a.select("body").append("div").attr("class","dc-title").style("opacity",0)),i.interrupt(),i.html(D(h)),i.style("border-color",d.getColor(b.layer?b:h,e));var k=i.node().getBoundingClientRect(),l={};if(g){var m=d.g().node().getBoundingClientRect(),n=g.centroid(b);l.left=m.left+m.width/2-k.width/2+n[0]+(window.scrollX||document.documentElement.scrollLeft),l.top=m.top+m.height/2-k.height-10+n[1]+(window.scrollY||document.documentElement.scrollTop)}else{var o=f.getBoundingClientRect();l.left=o.left+o.width/2-k.width/2+(window.scrollX||document.documentElement.scrollLeft),l.top=o.top-k.height-10+(window.scrollY||document.documentElement.scrollTop)}l.top+="px",l.left+="px",j||i.style(l),l.opacity=1,c.transition(i,d.transitionDuration()/1.5).style(l)},d._removeTitle=function(){c.transition(a.select(".dc-title"),d.transitionDuration()/1.5).style("opacity",0).remove()},d.clickOn=function(a){return arguments.length?(B=a,d):B},d.renderlet=c.logger.deprecate(function(a){return d.on("renderlet."+c.utils.uniqueId(),a),d},'chart.renderlet has been deprecated.  Please use chart.on("renderlet.<renderletKey>", renderletFunction)'),d.chartGroup=function(a){return arguments.length?(n||c.deregisterChart(d,J),J=a,n||c.registerChart(d,J),d):J},d.expireCache=function(){return d},d.legend=function(a){return arguments.length?(p=a,p.parent(d),d):p},d._wrapLabels=function(b,c){var d=1.1;return 0>=c?!1:void b.each(function(){for(var b,e=a.select(this),f=e.text().split(/\s+/).reverse(),g=[],h=0,i=e.attr("x")||0,j=e.attr("y")||0,k=parseFloat(e.attr("dy"))||0,l=e.text(null).append("tspan").attr("x",i).attr("y",j).attr("dy",k+"em");b=f.pop();)if(g.push(b),l.text(g.join(" ")),l.node().getComputedTextLength()>c){if(g.pop(),g.length<=1){var m=1===g.length?g[0]:b;for(l.text(m);l.node().getComputedTextLength()>c&&m.length>0;)l.text(m+"..."),m=m.substring(0,m.length-1)}if(g.length>0&&(g.length>1&&l.text(g.join(" ")),g=[b]),0===g.length&&0===f.length)break;l=e.append("tspan").attr("x",i).attr("y",j).attr("dy",++h*d+k+"em").text(b)}})},d.g=function(a){return arguments.length?(d._g=a,d):d._g},d.chartID=function(){return d.__dcFlag__},d.options=function(a){var b=["anchor","group","xAxisLabel","yAxisLabel","stack","title","point","getColor","overlayGeoJson"];for(var e in a)"function"==typeof d[e]?a[e]instanceof Array&&-1!==b.indexOf(e)?d[e].apply(d,a[e]):d[e].call(d,a[e]):c.logger.debug("Not a valid option setter name: "+e);return d},d.on=function(a,b){return K.on(a,b),d},window.addEventListener("resize",function(){return!d.g()||null===d.g().node().offsetParent||d.g().node().classList&&d.g().node().classList.contains("sub")?!1:(d.rescale&&d.rescale(),void d.redraw())}),d},c.marginMixin=function(a){return a.xAxisLabelPadding=0,a.xTickLabelPadding=0,a.yAxisLabelPadding=0,a.yTickLabelPadding=0,a.rightYAxisLabelPadding=0,a.rightYTickLabelPadding=0,a.legendTopPadding=0,a.legendBottomPadding=0,a.legendLeftPadding=0,a.legendRightPadding=0,a.margins=function(){var b=a._parent||a;return{top:b.legendTopPadding+10,bottom:b.xAxisLabelPadding+b.xTickLabelPadding+b.legendBottomPadding+10,left:b.yAxisLabelPadding+b.yTickLabelPadding+b.legendLeftPadding+10,right:b.rightYAxisLabelPadding+b.rightYTickLabelPadding+b.legendRightPadding+10}},a.effectiveWidth=function(){return a.width()-a.margins().left-a.margins().right},a.effectiveHeight=function(){return a.height()-a.margins().top-a.margins().bottom},a},c.colorMixin=function(b){var c=a.scale.category20c(),d=!0,e=function(a){return b.keyAccessor()(a)};return b.colors=function(d){return arguments.length?(c=d instanceof Array?a.scale.quantize().range(d):a.functor(d),b):c},b.ordinalColors=function(c){return b.colors(a.scale.ordinal().range(c))},b.linearColors=function(c){return b.colors(a.scale.linear().range(c).interpolate(a.interpolateHcl))},b.colorAccessor=function(a){return arguments.length?(e=a,d=!1,b):e},b.defaultColorAccessor=function(){return d},b.colorDomain=function(a){return arguments.length?(c.domain(a),b):c.domain()},b.calculateColorDomain=function(){var d=[a.min(b.data(),b.colorAccessor()),a.max(b.data(),b.colorAccessor())];return c.domain(d),b},b.getColor=function(a,b){return c(e.call(this,a,b))},b.colorCalculator=function(a){return arguments.length?(b.getColor=a,b):b.getColor},b},c.coordinateGridMixin=function(b){function d(){ba=!0,ea&&(b.x().domain(m(b.x().domain(),G)),N&&b.x().domain(m(b.x().domain(),N.x().domain())));var a=b.x().domain(),d=c.filters.RangedFilter(a[0],a[1]);b.replaceFilter(d),b.rescale(),b.redraw(),N&&!n(b.filter(),N.filter())&&c.events.trigger(function(){N.replaceFilter(d),N.redraw()}),b._invokeZoomedListener(),c.events.trigger(function(){b.redrawGroup()},c.constants.EVENT_DELAY),ba=!n(a,G)}function e(a,b){return!a||!b||a.length!==b.length||a.some(function(a,c){return a&&b[c]?a.toString()!==b[c].toString():a===b[c]})}function f(a,c){b.isOrdinal()?(b.elasticX()||0===F.domain().length)&&F.domain(b._ordinalXDomain()):b.elasticX()&&F.domain([b.xAxisMin(),b.xAxisMax()]);var d=F.domain();(c||e(I,d))&&b.rescale(),I=d,b.isOrdinal()?F.rangeBands([0,b.xAxisLength()],la,b._useOuterPadding()?ka:0):F.range([0,b.xAxisLength()]),P=P.scale(b.x());var f=a.selectAll("g."+v);f.empty()&&(f=a.append("g").attr("class",t+" "+v)),f.call(P);var g=f.selectAll(".tick text");b._wrapLabels(g,b.effectiveWidth()/g[0].length),b.xTickLabelPadding=f.node().getBBox().height}function g(a){var d=a.selectAll("g."+s);if(aa){d.empty()&&(d=a.insert("g",":first-child").attr("class",p+" "+s)),d.attr("transform","translate("+b.margins().left+","+b.margins().top+")");var e=P.tickValues()?P.tickValues():"function"==typeof F.ticks?F.ticks(P.ticks()[0]):F.domain(),f=d.selectAll("line").data(e),g=f.enter().append("line").attr("x1",function(a){return F(a)}).attr("y1",b._xAxisY()-b.margins().top).attr("x2",function(a){return F(a)}).attr("y2",0).attr("opacity",0);c.transition(g,b.transitionDuration()).attr("opacity",1),c.transition(f,b.transitionDuration()).attr("x1",function(a){return F(a)}).attr("y1",b._xAxisY()-b.margins().top).attr("x2",function(a){return F(a)}).attr("y2",0),f.exit().remove()}else d.selectAll("line").remove()}function h(){return b._xAxisY()-b.margins().top}function i(){return b.anchorName().replace(/[ .#=\[\]]/g,"-")+"-clip"}function j(){var a=c.utils.appendOrSelect(D,"defs"),d=i(),e=c.utils.appendOrSelect(a,"#"+d,"clipPath").attr("id",d),f=2*ja;c.utils.appendOrSelect(e,"rect").attr("width",b.xAxisLength()+f).attr("height",b.yAxisHeight()+f).attr("transform","translate(-"+ja+", -"+ja+")")}function k(a){var c=b.g();b.isOrdinal()&&($=!1),b.prepareAxisLabels(c),b._prepareYAxis(c),b.legend()&&b.legend().render(),f(c,a),b._prepareYAxis(c),(b.elasticX()||ca||a)&&b.renderXAxis(c),(b.elasticY()||ca||a)&&b.renderYAxis(c),b._generateBody(),b.plotData(),a?b.renderBrush(c,!1):b.redrawBrush(c,ca),b.fadeDeselectedArea(),ca=!1}function l(){ia?b._enableMouseZoom():ha&&b._disableMouseZoom()}function m(b,c){var d=[];return d[0]=a.max([b[0],c[0]]),d[1]=a.min([b[1],c[1]]),d}function n(a,b){return a||b?a&&b?0===a.length&&0===b.length?!0:a[0].valueOf()===b[0].valueOf()&&a[1].valueOf()===b[1].valueOf()?!0:!1:!1:!0}function o(a){return a instanceof Array&&a.length>1}var p="grid-line",q="chart-body",r="horizontal",s="vertical",t="axis",u="y",v="x",w="y-left",x="y-right",y=u+"-"+t+"-label",z=v+"-"+t+"-label",A=90,B=15,C=5;b=c.colorMixin(c.marginMixin(c.baseMixin(b))),b.colors(a.scale.category10()),b._mandatoryAttributes().push("x");var D,E,F,G,H,I,J,K,L,M,N,O,P=a.svg.axis().orient("bottom"),Q=c.units.integers,R=0,S=!1,T=0,U=a.svg.axis().orient("left"),V=0,W=!1,X=0,Y=!1,Z=a.svg.brush(),$=!0,_=!1,aa=!1,ba=!1,ca=!1,da=[1,1/0],ea=!0,fa=a.behavior.zoom().on("zoom",d),ga=a.behavior.zoom().on("zoom",null),ha=!1,ia=!1,ja=0,ka=.5,la=0,ma=!1;return b.rescale=function(){return M=void 0,ca=!0,b},b.resizing=function(){return ca},b.rangeChart=function(a){return arguments.length?(N=a,N.focusChart(b),b):N},b.zoomScale=function(a){return arguments.length?(da=a,b):da},b.zoomOutRestrict=function(a){return arguments.length?(da[0]=a?1:0,ea=a,b):ea},b._generateG=function(a){return D=void 0===a?b.svg():a,b._g=D.append("g"),b._g},b._generateBody=function(){return E=b._g.select("."+q),E.empty()&&(E=b._g.append("g").attr("class",q).attr("clip-path","url(#"+i()+")")),E.attr("transform","translate("+b.margins().left+", "+b.margins().top+")"),E},b.mouseZoomable=function(a){return arguments.length?(ia=a,b):ia},b.chartBodyG=function(a){return arguments.length?(E=a,b):E},b.x=function(a){return arguments.length?(F=a,G=F.domain(),b.rescale(),b):F},b.xOriginalDomain=function(){return G},b.xUnits=function(a){return arguments.length?(Q=a,b):Q},b.xAxis=function(a){return arguments.length?(P=a,b):P},b.elasticX=function(a){return arguments.length?(S=a,b):S},b.xAxisPadding=function(a){return arguments.length?(R=a,b):R},b.xUnitCount=function(){if(void 0===M){var a=b.xUnits()(b.x().domain()[0],b.x().domain()[1],b.x().domain());M=a instanceof Array?a.length:a}return M},b.useRightYAxis=function(a){return arguments.length?(ma=a,b):ma},b.isOrdinal=function(){return b.xUnits()===c.units.ordinal},b._useOuterPadding=function(){return!0},b._ordinalXDomain=function(){var a=b._computeOrderedGroups(b.data());return a.map(b.keyAccessor())},b.prepareAxisLabels=function(a){b.prepareXAxisLabel(a),b.prepareYAxisLabel(a,ma,b.yAxisLabel())},b.prepareXAxisLabel=function(a){var c=a.selectAll("text."+z);c.empty()&&b.xAxisLabel()&&(c=a.append("text").attr("class",z).attr("text-anchor","middle")),c.empty()||(b.xAxisLabel()&&c.text()!==b.xAxisLabel()&&c.text(b.xAxisLabel()),b._wrapLabels(c,b.effectiveWidth()),b.xAxisLabelPadding=c.node().getBBox().height)},b.prepareYAxisLabel=function(a,c,d){var e="text."+y+".",f=y+" ";c?(e+=x,f+=x):(e+=w,f+=w);var g=a.selectAll(e);g.empty()&&d&&(g=a.append("text").attr("class",f).attr("text-anchor","middle")),g.empty()||(d&&g.text()!==d&&g.text(d),b._wrapLabels(g,b.effectiveHeight()),c?b.rightYAxisLabelPadding=g.node().getBBox().height:b.yAxisLabelPadding=g.node().getBBox().height)},b.renderXAxis=function(a){var d=a.selectAll("g."+v),e=b.xAxisTickLabelRotate();e&&d.selectAll(".tick text").style("text-anchor",0>e?"end":"start").attr("transform","rotate("+e+") translate("+10*(e/A)+", -"+Math.abs(13*(e/A))+")"),d.attr("transform","translate("+b.margins().left+","+b._xAxisY()+")");var f=a.selectAll("text."+z);f.attr("transform","translate("+(b.margins().left+b.xAxisLength()/2)+","+(b.height()-b.xAxisLabelPadding-b.legendBottomPadding+C)+")"),c.transition(f,b.transitionDuration()).attr("transform","translate("+(b.margins().left+b.xAxisLength()/2)+","+(b.height()-b.xAxisLabelPadding-b.legendBottomPadding+C)+")"),g(a)},b._xAxisY=function(){return b.effectiveHeight()+b.margins().top},b.xAxisLength=function(){return b.effectiveWidth()},b.xAxisLabel=function(a){return arguments.length?(H=a,b):H},b.xAxisTickLabelRotate=function(a){return arguments.length?(T=a,b):T},b._prepareYAxis=function(c){if(void 0===J||b.elasticY()){void 0===J&&(J=a.scale.linear());var d=b.yAxisMin()||0,e=b.yAxisMax()||0;J.domain([d,e])}J.rangeRound([b.yAxisHeight(),0]),J.range([b.yAxisHeight(),0]),U=U.scale(J),b.yAxisTickIntegersOnly()&&U.tickFormat(a.format("d")),ma&&U.orient("right");var f=ma?"g."+u+"."+x:"g."+u+"."+w,g=ma?x:w,h=c.selectAll(f);h.empty()&&(h=c.append("g").attr("class",t+" "+u+" "+g)),h.call(U),ma?b.rightYTickLabelPadding=h.node().getBBox().width:b.yTickLabelPadding=h.node().getBBox().width},b.renderYAxis=function(a){b.renderYAxisAt(ma),b.renderYAxisLabel(ma);var c=b.yAxisTickLabelRotate();if(c){var d=A/2>=c?8:12,e=A/2>=c?16:14;axisYG.selectAll(".tick text").style("text-anchor","end").attr("transform","rotate("+c+") translate("+d*(c/A)+", "+e*(c/A)+")")}b._renderHorizontalGridLinesForAxis(a)},b.renderYAxisAt=function(a){var d=a?b.width()-b.margins().right:b.margins().left,e=a?"g."+u+"."+x:"g."+u+"."+w,f=b.g().selectAll(e);f.attr("transform","translate("+d+","+b.margins().top+")"),c.transition(f,b.transitionDuration()).attr("transform","translate("+d+","+b.margins().top+")")},b.renderYAxisLabel=function(a){var d=a?b.width()-b.legendRightPadding-B-C:b.legendLeftPadding+B+C,e=a?90:-90,f="text."+y+".";f+=a?x:w;var g=b.g().selectAll(f),h=(b.height()-b.xAxisLabelPadding-b.legendBottomPadding)/2+C;g.attr("transform","translate("+d+","+h+"), rotate("+e+")"),c.transition(g,b.transitionDuration()).attr("transform","translate("+d+","+h+"), rotate("+e+")")},b._renderHorizontalGridLinesForAxis=function(a){var d=a.selectAll("g."+r);if(_){var e=U.tickValues()?U.tickValues():J.ticks(U.ticks()[0]);d.empty()&&(d=a.insert("g",":first-child").attr("class",p+" "+r)),d.attr("transform","translate("+b.margins().left+","+b.margins().top+")");var f=d.selectAll("line").data(e),g=f.enter().append("line").attr("x1",1).attr("y1",function(a){return J(a)}).attr("x2",b.xAxisLength()).attr("y2",function(a){return J(a)}).attr("opacity",0);c.transition(g,b.transitionDuration()).attr("opacity",1),c.transition(f,b.transitionDuration()).attr("x1",1).attr("y1",function(a){return J(a)}).attr("x2",b.xAxisLength()).attr("y2",function(a){return J(a)}),f.exit().remove()}else d.selectAll("line").remove()},b._yAxisX=function(){return b.useRightYAxis()?b.width()-b.margins().right:b.margins().left},b.yAxisLabel=function(a,c){return arguments.length?(K=a,b):K},b.yAxisTickLabelRotate=function(a){return arguments.length?(X=a,b):X},b.yAxisTickIntegersOnly=function(a){return arguments.length?(Y=a,b):Y},b.y=function(a){return arguments.length?(J=a,b.rescale(),b):J},b.yAxis=function(a){return arguments.length?(U=a,b):U},b.elasticY=function(a){return arguments.length?(W=a,b):W},b.renderHorizontalGridLines=function(a){return arguments.length?(_=a,b):_},b.renderVerticalGridLines=function(a){return arguments.length?(aa=a,b):aa},b.xAxisMin=function(){var d=a.min(b.data(),function(a){return b.keyAccessor()(a)});return c.utils.subtract(d,R)},b.xAxisMax=function(){var d=a.max(b.data(),function(a){return b.keyAccessor()(a)});return c.utils.add(d,R)},b.yAxisMin=function(){var d=a.min(b.data(),function(a){return b.valueAccessor()(a)});return c.utils.subtract(d,V)},b.yAxisMax=function(){var d=a.max(b.data(),function(a){return b.valueAccessor()(a)});return c.utils.add(d,V)},b.yAxisPadding=function(a){return arguments.length?(V=a,b):V},b.yAxisHeight=function(){return b.effectiveHeight()},b.round=function(a){return arguments.length?(L=a,b):L},b._rangeBandPadding=function(a){return arguments.length?(la=a,b):la},b._outerRangeBandPadding=function(a){return arguments.length?(ka=a,b):ka},c.override(b,"filter",function(a){return arguments.length?(b._filter(a),a?b.brush().extent(a):b.brush().clear(),b):b._filter()}),b.brush=function(a){return arguments.length?(Z=a,b):Z},b.renderBrush=function(a){if($){Z.on("brush",b._brushing),Z.on("brushstart",b._disableMouseZoom),Z.on("brushend",l);var c=a.append("g").attr("class","brush").attr("transform","translate("+b.margins().left+","+b.margins().top+")").call(Z.x(b.x()));b.setBrushY(c,!1),b.setHandlePaths(c),b.hasFilter()&&b.redrawBrush(a,!1)}},b.setHandlePaths=function(a){a.selectAll(".resize").append("path").attr("d",b.resizeHandlePath)},b.setBrushY=function(a){a.selectAll(".brush rect").attr("height",h()),a.selectAll(".resize path").attr("d",b.resizeHandlePath)},b.extendBrush=function(){var a=Z.extent();return b.round()&&(a[0]=a.map(b.round())[0],a[1]=a.map(b.round())[1],b._g.select(".brush").call(Z.extent(a))),a},b.brushIsEmpty=function(a){return Z.empty()||!a||a[1]<=a[0]},b._brushing=function(){var a=b.extendBrush();if(b.redrawBrush(b._g,!1),b.brushIsEmpty(a))c.events.trigger(function(){b.filter(null),b.redrawGroup()},c.constants.EVENT_DELAY);else{var d=c.filters.RangedFilter(a[0],a[1]);c.events.trigger(function(){b.replaceFilter(d),b.redrawGroup()},c.constants.EVENT_DELAY)}},b.redrawBrush=function(a,d){if($){b.filter()&&b.brush().empty()&&b.brush().extent(b.filter());var e=c.optionalTransition(d,b.transitionDuration())(a.select("g.brush"));b.setBrushY(e),e.call(b.brush().x(b.x()).extent(b.brush().extent()))}b.fadeDeselectedArea()},b.fadeDeselectedArea=function(){},b.resizeHandlePath=function(a){var b=+("e"===a),c=b?1:-1,d=h()/3;return"M"+.5*c+","+d+"A6,6 0 0 "+b+" "+6.5*c+","+(d+6)+"V"+(2*d-6)+"A6,6 0 0 "+b+" "+.5*c+","+2*d+"ZM"+2.5*c+","+(d+8)+"V"+(2*d-8)+"M"+4.5*c+","+(d+8)+"V"+(2*d-8)},b.clipPadding=function(a){return arguments.length?(ja=a,b):ja},b._preprocessData=function(){},b._doRender=function(){return b.resetSvg(),b._preprocessData(),b._generateG(),k(!0),j(),l(),b},b._doRedraw=function(){return b._preprocessData(),k(!1),j(),b},b._enableMouseZoom=function(){ha=!0,fa.x(b.x()).scaleExtent(da).size([b.width(),b.height()]).duration(b.transitionDuration()),b.root().call(fa)},b._disableMouseZoom=function(){b.root().call(ga)},b.focus=function(a){o(a)?b.x().domain(a):b.x().domain(G),fa.x(b.x()),d()},b.refocused=function(){return ba},b.focusChart=function(a){return arguments.length?(O=a,b.on("filtered",function(a){a.filter()?n(a.filter(),O.filter())||c.events.trigger(function(){O.focus(a.filter())}):c.events.trigger(function(){O.x().domain(O.xOriginalDomain())})}),b):O},b.brushOn=function(a){return arguments.length?($=a,b):$},b},c.stackMixin=function(b){function d(a,c){var d=a.accessor||b.valueAccessor(),f=a.group.all();return b.isOrdinal()&&(f=b._computeOrderedGroups(f)),a.name=String(a.name||c),a.values=f.map(function(c,e){return{x:b.keyAccessor()(c,e),y:a.hidden?null:d(c,e),data:c,layer:a.name,hidden:a.hidden}}),a.values=a.values.filter(e()),a.values}function e(){if(!b.x())return a.functor(!0);var c=b.x().domain();return b.isOrdinal()?function(){return!0}:b.elasticX()?function(){return!0}:function(a){return a.x>=c[0]&&a.x<=c[c.length-1]}}function f(a){var b=j.map(c.pluck("name")).indexOf(a);return j[b]}function g(){var a=b.data().map(function(a){return a.values});return Array.prototype.concat.apply([],a)}function h(a){return!a.hidden}var i=a.layout.stack().values(d),j=[],k={},l=!1;return b.stack=function(a,c,d){if(!arguments.length)return j;arguments.length<=2&&(d=c);var e={group:a};return"string"==typeof c&&(e.name=c),"function"==typeof d&&(e.accessor=d),j.push(e),b},c.override(b,"group",function(a,c,d){return arguments.length?(j=[],k={},b.stack(a,c),d&&b.valueAccessor(d),b._group(a,c)):b._group()}),b.hidableStacks=function(a){
return arguments.length?(l=a,b):l},b.hideStack=function(a){var c=f(a);return c&&(c.hidden=!0),b},b.showStack=function(a){var c=f(a);return c&&(c.hidden=!1),b},b.getValueAccessorByIndex=function(a){return j[a].accessor||b.valueAccessor()},b.yAxisMin=function(){var d=a.min(g(),function(a){return a.y+a.y0<a.y0?a.y+a.y0:a.y0});return c.utils.subtract(d,b.yAxisPadding())},b.yAxisMax=function(){var d=a.max(g(),function(a){return a.y+a.y0});return c.utils.add(d,b.yAxisPadding())},b.xAxisMin=function(){var d=a.min(g(),c.pluck("x"));return c.utils.subtract(d,b.xAxisPadding())},b.xAxisMax=function(){var d=a.max(g(),c.pluck("x"));return c.utils.add(d,b.xAxisPadding())},c.override(b,"title",function(a,c){return a?"function"==typeof a?b._title(a):a===b._groupName&&"function"==typeof c?b._title(c):"function"!=typeof c?k[a]||b._title():(k[a]=c,b):b._title()}),b.stackLayout=function(a){return arguments.length?(i=a,b):i},b.data(function(){var a=j.filter(h);return a.length?b.stackLayout()(a):[]}),b._ordinalXDomain=function(){var a=g().map(c.pluck("data")),d=b._computeOrderedGroups(a);return d.map(b.keyAccessor())},b.colorAccessor(function(a){var b=this.layer||this.name||a.name||a.layer;return b}),b.legendables=function(){return j.map(function(a,c){return{chart:b,name:a.name,hidden:a.hidden||!1,color:b.getColor.call(a,a.values,c)}})},b.isLegendableHidden=function(a){var b=f(a.name);return b?b.hidden:!1},b.legendToggle=function(a){l&&(b.isLegendableHidden(a)?b.showStack(a.name):b.hideStack(a.name),b.renderGroup())},b},c.capMixin=function(b){var d=1/0,e="Others",f=function(c){var d=a.sum(c,b.valueAccessor()),f=b.group().all(),g=a.sum(f,b.valueAccessor()),h=c.map(b.keyAccessor()),i=f.map(b.keyAccessor()),j=a.set(h),k=i.filter(function(a){return!j.has(a)});return g>d?c.concat([{others:k,key:e,value:g-d}]):c};return b.cappedKeyAccessor=function(a,c){return a.others?a.key:b.keyAccessor()(a,c)},b.cappedValueAccessor=function(a,c){return a.others?a.value:b.valueAccessor()(a,c)},b.data(function(a){if(d===1/0)return b._computeOrderedGroups(a.all());var c=a.top(d);return c=b._computeOrderedGroups(c),f?f(c):c}),b.cap=function(a){return arguments.length?(d=a,b):d},b.othersLabel=function(a){return arguments.length?(e=a,b):e},b.othersGrouper=function(a){return arguments.length?(f=a,b):f},c.override(b,"onClick",function(a){a.others&&b.filter([a.others]),b._onClick(a)}),b},c.bubbleMixin=function(b){var d=.3,e=10;b.BUBBLE_NODE_CLASS="node",b.BUBBLE_CLASS="bubble",b.MIN_RADIUS=10,b=c.colorMixin(b),b.renderLabel(!0),b.data(function(a){return a.top(1/0)});var f=a.scale.linear().domain([0,100]),g=function(a){return a.r};b.r=function(a){return arguments.length?(f=a,b):f},b.radiusValueAccessor=function(a){return arguments.length?(g=a,b):g},b.rMin=function(){var c=a.min(b.data(),function(a){return b.radiusValueAccessor()(a)});return c},b.rMax=function(){var c=a.max(b.data(),function(a){return b.radiusValueAccessor()(a)});return c},b.bubbleR=function(a){var c=b.radiusValueAccessor()(a),d=b.r()(c);return(isNaN(d)||0>=c)&&(d=0),d};var h=function(a){return b.label()(a)},i=function(a){return b.bubbleR(a)>e},j=function(a){return i(a)?1:0},k=function(a){return i(a)?"all":"none"};b._doRenderLabel=function(a){if(b.renderLabel()){var d=a.select("text");d.empty()&&(d=a.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",b.onClick)),d.attr("opacity",0).attr("pointer-events",k).text(h),c.transition(d,b.transitionDuration()).attr("opacity",j)}},b.doUpdateLabels=function(a){if(b.renderLabel()){var d=a.selectAll("text").attr("pointer-events",k).text(h);c.transition(d,b.transitionDuration()).attr("opacity",j)}};var l=function(a){return b.title()(a)};return b._doRenderTitles=function(a){if(b.renderTitle()){var c=a.select("title");c.empty()&&a.append("title").text(l)}},b.doUpdateTitles=function(a){b.renderTitle()&&a.selectAll("title").text(l)},b.minRadius=function(a){return arguments.length?(b.MIN_RADIUS=a,b):b.MIN_RADIUS},b.minRadiusWithLabel=function(a){return arguments.length?(e=a,b):e},b.maxBubbleRelativeSize=function(a){return arguments.length?(d=a,b):d},b.fadeDeselectedArea=function(){b.hasFilter()?b.selectAll("g."+b.BUBBLE_NODE_CLASS).each(function(a){b.isSelectedNode(a)?b.highlightSelected(this):b.fadeDeselected(this)}):b.selectAll("g."+b.BUBBLE_NODE_CLASS).each(function(){b.resetHighlight(this)})},b.isSelectedNode=function(a){return b.hasFilter(a.key)},b.onClick=function(a){var d=a.key;c.events.trigger(function(){b.filter(d),b.redrawGroup()})},b},c.pieChart=function(b,d){function e(){D=E?E:a.min([R.effectiveWidth(),R.effectiveHeight()])/2;var b,d=r(),e=t();if(a.sum(R.data(),R.valueAccessor())?(b=e(R.data()),R._g.classed(L,!1)):(b=e([{key:M,value:1,others:[M]}]),R._g.classed(L,!0)),R._g){var g=R._g.selectAll("g."+J).data(b);f(g,d,b),l(b,d),p(g),q(),c.transition(R._g,R.transitionDuration()).attr("transform","translate("+R.cx()+","+R.cy()+")")}}function f(a,b,c){var d=g(a);h(d,b),R._attachTitle(d,b),j(c,b)}function g(a){var b=a.enter().append("g").attr("class",function(a,b){return J+" _"+b});return b}function h(a,b){var d=a.append("path").attr("fill",y).on("click",z).attr("d",function(a,c){return A(a,c,b)});c.transition(d,R.transitionDuration(),function(a){a.attrTween("d",w)})}function i(a,b){c.transition(a,R.transitionDuration()).attr("transform",function(a){return B(a,b)}).attr("text-anchor","middle").text(function(a){var b=a.data;return!v(b)&&!u(a)||s(a)?R.label()(a.data):""})}function j(a,b){if(R.renderLabel()){var c=R._g.selectAll("text."+K).data(a);c.exit().remove();var d=c.enter().append("text").attr("class",function(a,b){var c=K+" _"+b;return H&&(c+=" external"),c}).on("click",z);i(d,b),H&&Q&&k(a,b)}}function k(b,d){var e=R._g.selectAll("polyline."+J).data(b);e.enter().append("polyline").attr("class",function(a,b){return"pie-path _"+b+" "+J}),e.exit().remove(),c.transition(e,R.transitionDuration()).attrTween("points",function(b){this._current=this._current||b;var c=a.interpolate(this._current,b);return this._current=c(0),function(b){var e=a.svg.arc().outerRadius(D-O+H).innerRadius(D-O),f=c(b);return[d.centroid(f),e.centroid(f)]}}).style("visibility",function(a){return a.endAngle-a.startAngle<1e-4?"hidden":"visible"})}function l(a,b){m(a,b),n(a,b),o(a)}function m(a,b){var d=R._g.selectAll("g."+J).data(a).select("path").attr("d",function(a,c){return A(a,c,b)});c.transition(d,R.transitionDuration(),function(a){a.attrTween("d",w)}).attr("fill",y)}function n(a,b){if(R.renderLabel()){var c=R._g.selectAll("text."+K).data(a);i(c,b),H&&Q&&k(a,b)}}function o(a){R.renderTitle()&&R._g.selectAll("g."+J).data(a).select("title").text(function(a){return R.title()(a.data)})}function p(a){a.exit().remove()}function q(){R.hasFilter()?R.selectAll("g."+J).each(function(a){s(a)?R.highlightSelected(this):R.fadeDeselected(this)}):R.selectAll("g."+J).each(function(){R.resetHighlight(this)})}function r(){return a.svg.arc().outerRadius(D-O).innerRadius(N)}function s(a){return R.hasFilter(R.cappedKeyAccessor(a.data))}function t(){return a.layout.pie().sort(null).value(R.cappedValueAccessor)}function u(a){var b=a.endAngle-a.startAngle;return isNaN(b)||P>b}function v(a){return 0===R.cappedValueAccessor(a)}function w(b){b.innerRadius=N;var c=this._current;x(c)&&(c={startAngle:0,endAngle:0});var d=a.interpolate(c,b);return this._current=d(0),function(a){return A(d(a),0,r())}}function x(a){return!a||isNaN(a.startAngle)||isNaN(a.endAngle)}function y(a,b){return R.getColor(a.data,b)}function z(a,b){R._g.attr("class")!==L&&R.onClick(a.data,b)}function A(a,b,c){var d=c(a,b);return d.indexOf("NaN")>=0&&(d="M0,0"),d}function B(b,c){var d;return d=H?a.svg.arc().outerRadius(D-O+H).innerRadius(D-O+H).centroid(b):c.centroid(b),isNaN(d[0])||isNaN(d[1])?"translate(0,0)":"translate("+d+")"}function C(b,c){R.selectAll("g.pie-slice").each(function(d){b.name===d.data.key&&a.select(this).classed("highlight",c)})}var D,E,F,G,H,I=.5,J="pie-slice",K="pie-slice-text",L="empty-chart",M="empty",N=0,O=0,P=I,Q=!1,R=c.marginMixin(c.capMixin(c.colorMixin(c.baseMixin({}))));return R.colorAccessor(R.cappedKeyAccessor),R.title(function(a){return"<b>"+R.cappedKeyAccessor(a)+":</b> "+R.cappedValueAccessor(a)}),R.slicesCap=R.cap,R.label(R.cappedKeyAccessor),R.renderLabel(!0),R.transitionDuration(350),R._doRender=function(){return R.resetSvg(),R.legend()&&R.legend().render(),R._g=R.svg().append("g").attr("transform","translate("+R.cx()+","+R.cy()+")"),e(),R},R.externalRadiusPadding=function(a){return arguments.length?(O=a,R):O},R.innerRadius=function(a){return arguments.length?(N=a,R):N},R.radius=function(a){return arguments.length?(E=a,R):E},R.cx=function(a){return arguments.length?(F=a,R):F||(R.width()+R.margins().left-R.margins().right)/2},R.cy=function(a){return arguments.length?(G=a,R):G||(R.height()+R.margins().top-R.margins().bottom)/2},R._doRedraw=function(){return e(),R},R.minAngleForLabel=function(a){return arguments.length?(P=a,R):P},R.emptyTitle=function(a){return 0===arguments.length?M:(M=a,R)},R.externalLabels=function(a){return 0===arguments.length?H:(H=a?a:void 0,R)},R.drawPaths=function(a){return 0===arguments.length?Q:(Q=a,R)},R.legendables=function(){return R.data().map(function(a,b){var c={name:a.key,data:a.value,others:a.others,chart:R};return c.color=R.getColor(a,b),c})},R.legendHighlight=function(a){C(a,!0)},R.legendReset=function(a){C(a,!1)},R.legendToggle=function(a){R.onClick({key:a.name,others:a.others})},R.anchor(b,d)},c.barChart=function(b,d){function e(a){return c.utils.safeNumber(Math.abs(n.y()(a.y+a.y0)-n.y()(a.y0)))}function f(a,b,d){var f=a.selectAll("text.barLabel").data(d.values,c.pluck("x"));f.enter().append("text").attr("class","barLabel").attr("text-anchor","middle"),n.isOrdinal()&&(f.on("click",n.onClick),f.attr("cursor","pointer")),c.transition(f,n.transitionDuration()).attr("x",function(a){var b=n.x()(a.x);return p||(b+=j/2),c.utils.safeNumber(b)}).attr("y",function(a){var b=n.y()(a.y+a.y0);return a.y<0&&(b-=e(a)),c.utils.safeNumber(b-m)}).text(function(a){return n.label()(a)}),c.transition(f.exit(),n.transitionDuration()).attr("height",0).remove()}function g(a,b,d){var f=a.selectAll("rect.bar").data(d.values,c.pluck("x"));f.enter().append("rect").attr("class","bar").attr("fill",c.pluck("data",n.getColor)).attr("y",n.yAxisHeight()).attr("height",0);n._attachTitle(f),n.isOrdinal()&&f.on("click",n.onClick),c.transition(f,n.transitionDuration()).attr("x",function(a){var b=n.x()(a.x);return p&&(b-=j/2),n.isOrdinal()&&void 0!==o&&(b+=o/2),c.utils.safeNumber(b)}).attr("y",function(a){var b=n.y()(a.y+a.y0);return a.y<0&&(b-=e(a)),c.utils.safeNumber(b)}).attr("width",j).attr("height",function(a){return e(a)}).attr("fill",c.pluck("data",n.getColor)).select("title").text(c.pluck("data",n.title(d.name))),c.transition(f.exit(),n.transitionDuration()).attr("height",0).remove()}function h(){if(void 0===j){var a=n.xUnitCount();j=n.isOrdinal()&&void 0===o?Math.floor(n.x().rangeBand()):o?Math.floor((n.xAxisLength()-(a-1)*o)/a):Math.floor(n.xAxisLength()/(1+n.barPadding())/a),(j===1/0||isNaN(j)||k>j)&&(j=k)}}function i(b,c){return function(){var d=a.select(this),e=d.attr("fill")===b;return c?!e:e}}var j,k=1,l=2,m=3,n=c.stackMixin(c.coordinateGridMixin({})),o=l,p=!1,q=!1;return c.override(n,"rescale",function(){return n._rescale(),j=void 0,n}),c.override(n,"render",function(){return n.round()&&p&&!q&&c.logger.warn("By default, brush rounding is disabled if bars are centered. See dc.js bar chart API documentation for details."),n._render()}),n.label(function(a){return c.utils.printSingleValue(a.y0+a.y)},!1),n.plotData=function(){var b=n.chartBodyG().selectAll("g.stack").data(n.data());h(),b.enter().append("g").attr("class",function(a,b){return"stack _"+b});var c=b.size()-1;b.each(function(b,d){var e=a.select(this);g(e,d,b),n.renderLabel()&&c===d&&f(e,d,b)})},n.fadeDeselectedArea=function(){var a=n.chartBodyG().selectAll("rect.bar"),b=n.brush().extent();if(n.isOrdinal())n.hasFilter()?(a.classed(c.constants.SELECTED_CLASS,function(a){return n.hasFilter(a.x)}),a.classed(c.constants.DESELECTED_CLASS,function(a){return!n.hasFilter(a.x)})):(a.classed(c.constants.SELECTED_CLASS,!1),a.classed(c.constants.DESELECTED_CLASS,!1));else if(n.brushIsEmpty(b))a.classed(c.constants.DESELECTED_CLASS,!1);else{var d=b[0],e=b[1];a.classed(c.constants.DESELECTED_CLASS,function(a){return a.x<d||a.x>=e})}},n.centerBar=function(a){return arguments.length?(p=a,n):p},c.override(n,"onClick",function(a){n._onClick(a.data)}),n.barPadding=function(a){return arguments.length?(n._rangeBandPadding(a),o=void 0,n):n._rangeBandPadding()},n._useOuterPadding=function(){return void 0===o},n.outerPadding=n._outerRangeBandPadding,n.gap=function(a){return arguments.length?(o=a,n):o},n.extendBrush=function(){var a=n.brush().extent();return!n.round()||p&&!q||(a[0]=a.map(n.round())[0],a[1]=a.map(n.round())[1],n.chartBodyG().select(".brush").call(n.brush().extent(a))),a},n.alwaysUseRounding=function(a){return arguments.length?(q=a,n):q},n.legendHighlight=function(a){n.isLegendableHidden(a)||n.g().selectAll("rect.bar").classed("highlight",i(a.color)).classed("fadeout",i(a.color,!0))},n.legendReset=function(){n.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)},c.override(n,"xAxisMax",function(){var a=this._xAxisMax();if("resolution"in n.xUnits()){var b=n.xUnits().resolution;a+=b}return a}),n.anchor(b,d)},c.lineChart=function(b,d){function e(a,b){return y.getColor.call(a,a.values,b)}function f(b,d){var f=a.svg.line().x(function(a){return y.x()(a.x)}).y(function(a){return y.y()(a.y+a.y0)}).interpolate(E).tension(F);q&&f.defined(q);var g=b.append("path").attr("class","line").attr("stroke",e);r&&g.attr("stroke-dasharray",r),c.transition(d.select("path.line"),y.transitionDuration()).attr("stroke",e).attr("d",function(a){return h(f(a.values))})}function g(b,d){if(z){var f=a.svg.area().x(function(a){return y.x()(a.x)}).y(function(a){return y.y()(a.y+a.y0)}).y0(function(a){return y.y()(a.y0)}).interpolate(E).tension(F);q&&f.defined(q),b.append("path").attr("class","area").attr("fill",e).attr("d",function(a){return h(f(a.values))}),c.transition(d.select("path.area"),y.transitionDuration()).attr("fill",e).attr("d",function(a){return h(f(a.values))})}}function h(a){return!a||a.indexOf("NaN")>=0?"M0,0":a}function i(b,d){if(!y.brushOn()&&y.xyTipsOn()){var e=t+"-list",f=b.select("g."+e);f.empty()&&(f=b.append("g").attr("class",e)),d.each(function(b,d){var e=b.values;q&&(e=e.filter(q));var g=f.select("g."+t+"._"+d);g.empty()&&(g=f.append("g").attr("class",t+" _"+d)),j(g);var h=g.selectAll("circle."+u).data(e,c.pluck("x"));h.enter().append("circle").attr("class",u).attr("r",m()).style("fill-opacity",C).style("stroke-opacity",D).on("mousemove",function(){var b=a.select(this);k(b),l(b,g)}).on("mouseout",function(){var b=a.select(this);n(b),o(g)}),h.attr("cx",function(a){return c.utils.safeNumber(y.x()(a.x))}).attr("cy",function(a){return c.utils.safeNumber(y.y()(a.y+a.y0))}).attr("fill",y.getColor),y._attachTitle(h),h.exit().remove()})}}function j(a){var b=a.select("path."+v).empty()?a.append("path").attr("class",v):a.select("path."+v);b.style("display","none").attr("stroke-dasharray","5,5");var c=a.select("path."+w).empty()?a.append("path").attr("class",w):a.select("path."+w);c.style("display","none").attr("stroke-dasharray","5,5")}function k(a){return a.style("fill-opacity",.8),a.style("stroke-opacity",.8),a.attr("r",A),a}function l(a,b){var c=a.attr("cx"),d=a.attr("cy"),e=y._yAxisX()-y.margins().left,f="M"+e+" "+d+"L"+c+" "+d,g="M"+c+" "+y.yAxisHeight()+"L"+c+" "+d;b.select("path."+v).style("display","").attr("d",f),b.select("path."+w).style("display","").attr("d",g)}function m(){return B||A}function n(a){a.style("fill-opacity",C).style("stroke-opacity",D).attr("r",m())}function o(a){a.select("path."+v).style("display","none"),a.select("path."+w).style("display","none")}function p(b,c,d){return function(){var e=a.select(this),f=e.attr("stroke")===b&&e.attr("stroke-dasharray")===(c instanceof Array?c.join(","):null)||e.attr("fill")===b;return d?!f:f}}var q,r,s=5,t="dc-tooltip",u="dot",v="yRef",w="xRef",x=1e-6,y=c.stackMixin(c.coordinateGridMixin({})),z=!1,A=s,B=null,C=x,D=x,E="linear",F=.7,G=!0;return y.transitionDuration(500),y._rangeBandPadding(1),y.plotData=function(){var a=y.chartBodyG(),b=a.selectAll("g.stack-list");b.empty()&&(b=a.append("g").attr("class","stack-list"));var c=b.selectAll("g.stack").data(y.data()),d=c.enter().append("g").attr("class",function(a,b){return"stack _"+b});f(d,c),g(d,c),i(a,c)},y.interpolate=function(a){return arguments.length?(E=a,y):E},y.tension=function(a){return arguments.length?(F=a,y):F},y.defined=function(a){return arguments.length?(q=a,y):q},y.dashStyle=function(a){return arguments.length?(r=a,y):r},y.renderArea=function(a){return arguments.length?(z=a,y):z},y.xyTipsOn=function(a){return arguments.length?(G=a,y):G},y.dotRadius=function(a){return arguments.length?(A=a,y):A},y.renderDataPoints=function(a){return arguments.length?(a?(C=a.fillOpacity||.8,D=a.strokeOpacity||.8,B=a.radius||2):(C=x,D=x,B=null),y):{fillOpacity:C,strokeOpacity:D,radius:B}},y.legendHighlight=function(a){y.isLegendableHidden(a)||y.g().selectAll("path.line, path.area").classed("highlight",p(a.color,a.dashstyle)).classed("fadeout",p(a.color,a.dashstyle,!0))},y.legendReset=function(){y.g().selectAll("path.line, path.area").classed("highlight",!1).classed("fadeout",!1)},c.override(y,"legendables",function(){var a=y._legendables();return r?a.map(function(a){return a.dashstyle=r,a}):a}),y.anchor(b,d)},c.dataCount=function(b,d){var e=a.format(",d"),f=c.baseMixin({}),g={some:"",all:""};return f.html=function(a){return arguments.length?(a.all&&(g.all=a.all),a.some&&(g.some=a.some),f):g},f.formatNumber=function(a){return arguments.length?(e=a,f):e},f._doRender=function(){var a=f.dimension().size(),b=f.group().value(),c=e(a),d=e(b);return a===b&&""!==g.all?f.root().html(g.all.replace("%total-count",c).replace("%filter-count",d)):""!==g.some?f.root().html(g.some.replace("%total-count",c).replace("%filter-count",d)):(f.selectAll(".total-count").text(c),f.selectAll(".filter-count").text(d)),f},f._doRedraw=function(){return f._doRender()},f.anchor(b,d)},c.dataTable=function(b,d){function e(){var a=!0;if(p.forEach(function(b){a&="function"==typeof b}),!a){n.selectAll("th").remove();var b=n.root().selectAll("th").data(p),c=b.enter().append("th");c.attr("class",m).html(function(a){return n._doColumnHeaderFormat(a)})}var d=n.root().selectAll("tbody").data(f(),function(a){return n.keyAccessor()(a)}),e=d.enter().append("tbody");return t===!0&&e.append("tr").attr("class",l).append("td").attr("class",i).attr("colspan",p.length).html(function(a){return n.keyAccessor()(a)}),d.exit().remove(),e}function f(){var b;return b=r===a.ascending?n.dimension().bottom(o):n.dimension().top(o),a.nest().key(n.group()).sortKeys(r).entries(b.sort(function(a,b){return r(q(a),q(b))}).slice(s,h))}function g(a){var b=a.order().selectAll("tr."+j).data(function(a){return a.values}),c=b.enter().append("tr").attr("class",j);return p.forEach(function(a,b){c.append("td").attr("class",k+" _"+b).html(function(b){return n._doColumnValueFormat(a,b)})}),b.exit().remove(),b}var h,i="dc-table-label",j="dc-table-row",k="dc-table-column",l="dc-table-group",m="dc-table-head",n=c.baseMixin({}),o=25,p=[],q=function(a){return a},r=a.ascending,s=0,t=!0;return n._doRender=function(){return n.selectAll("tbody").remove(),g(e()),n},n._doColumnValueFormat=function(a,b){return"function"==typeof a?a(b):"string"==typeof a?b[a]:a.format(b)},n._doColumnHeaderFormat=function(a){return"function"==typeof a?n._doColumnHeaderFnToString(a):"string"==typeof a?n._doColumnHeaderCapitalize(a):String(a.label)},n._doColumnHeaderCapitalize=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},n._doColumnHeaderFnToString=function(a){var b=String(a),c=b.indexOf("return ");if(c>=0){var d=b.lastIndexOf(";");if(d>=0){b=b.substring(c+7,d);var e=b.indexOf("numberFormat");e>=0&&(b=b.replace("numberFormat",""))}}return b},n._doRedraw=function(){return n._doRender()},n.size=function(a){return arguments.length?(o=a,n):o},n.beginSlice=function(a){return arguments.length?(s=a,n):s},n.endSlice=function(a){return arguments.length?(h=a,n):h},n.columns=function(a){return arguments.length?(p=a,n):p},n.sortBy=function(a){return arguments.length?(q=a,n):q},n.order=function(a){return arguments.length?(r=a,n):r},n.showGroups=function(a){return arguments.length?(t=a,n):t},n.anchor(b,d)},c.dataGrid=function(b,d){function e(){var a=m.root().selectAll("div."+l).data(f(),function(a){return m.keyAccessor()(a)}),b=a.enter().append("div").attr("class",l);return s&&b.html(function(a){return s(a)}),a.exit().remove(),b}function f(){var b=m.dimension().top(n);return a.nest().key(m.group()).sortKeys(q).entries(b.sort(function(a,b){return q(p(a),p(b))}).slice(r,h))}function g(a){var b=a.order().selectAll("div."+j).data(function(a){return a.values});return b.enter().append("div").attr("class",j).html(function(a){return o(a)}),b.exit().remove(),b}var h,i="dc-grid-label",j="dc-grid-item",k="dc-grid-group",l="dc-grid-top",m=c.baseMixin({}),n=999,o=function(a){return"you need to provide an html() handling param:  "+JSON.stringify(a)},p=function(a){return a},q=a.ascending,r=0,s=function(a){return"<div class='"+k+"'><h1 class='"+i+"'>"+m.keyAccessor()(a)+"</h1></div>"};return m._doRender=function(){return m.selectAll("div."+l).remove(),g(e()),m},m._doRedraw=function(){return m._doRender()},m.beginSlice=function(a){return arguments.length?(r=a,m):r},m.endSlice=function(a){return arguments.length?(h=a,m):h},m.size=function(a){return arguments.length?(n=a,m):n},m.html=function(a){return arguments.length?(o=a,m):o},m.htmlGroup=function(a){return arguments.length?(s=a,m):s},m.sortBy=function(a){return arguments.length?(p=a,m):p},m.order=function(a){return arguments.length?(q=a,m):q},m.anchor(b,d)},c.bubbleChart=function(b,d){function e(a){var b=a.enter().append("g");b.attr("class",j.BUBBLE_NODE_CLASS).attr("transform",m).append("circle").attr("class",function(a,b){return j.BUBBLE_CLASS+" _"+b}).on("click",j.onClick).attr("fill",j.getColor).attr("r",0),c.transition(a,j.transitionDuration()).selectAll("circle."+j.BUBBLE_CLASS).attr("r",function(a){return j.bubbleR(a)}).attr("opacity",function(a){return j.bubbleR(a)>0?1:0}),j._doRenderLabel(b),j._doRenderTitles(b)}function f(a){c.transition(a,j.transitionDuration()).attr("transform",m).selectAll("circle."+j.BUBBLE_CLASS).attr("fill",j.getColor).attr("r",function(a){return j.bubbleR(a)}).attr("opacity",function(a){return j.bubbleR(a)>0?1:0}),j.doUpdateLabels(a),j.doUpdateTitles(a)}function g(a){a.exit().remove()}function h(a){var b=j.x()(j.keyAccessor()(a));return isNaN(b)&&(b=0),b}function i(a){var b=j.y()(j.valueAccessor()(a));return isNaN(b)&&(b=0),b}var j=c.bubbleMixin(c.coordinateGridMixin({})),k=!1,l=!1;j.transitionDuration(750);var m=function(a){return"translate("+h(a)+","+i(a)+")"};return j.elasticRadius=function(a){return arguments.length?(k=a,j):k},j.sortBubbleSize=function(a){return arguments.length?(l=a,j):l},j.plotData=function(){k&&j.r().domain([j.rMin(),j.rMax()]),j.r().range([j.MIN_RADIUS,j.xAxisLength()*j.maxBubbleRelativeSize()]);var b=j.data();if(l){var c=j.radiusValueAccessor();b.sort(function(b,d){return a.descending(c(b),c(d))})}var d=j.chartBodyG().selectAll("g."+j.BUBBLE_NODE_CLASS).data(b,function(a){return a.key});l&&d.order(),e(d),f(d),g(d),j.fadeDeselectedArea()},j.renderBrush=function(){},j.redrawBrush=function(){j.fadeDeselectedArea()},j.anchor(b,d)},c.compositeChart=function(b,d){function e(a,b){var c,d,e,f;if(a&&(c=l(),d=o()),b&&(e=m(),f=p()),x.alignYAxes()&&a&&b&&(0>c||0>e)){var g,h;0>c&&(g=d/c),0>e&&(h=f/e),0>c&&0>e?h>g?f=e*g:d=c*h:0>c?e=f/g:c=d/(f/e)}return{lyAxisMin:c,lyAxisMax:d,ryAxisMin:e,ryAxisMax:f}}function f(b){var c=void 0===x.rightY()||x.elasticY(),d=c||x.resizing();void 0===x.rightY()&&x.rightY(a.scale.linear()),c&&x.rightY().domain([b.ryAxisMin,b.ryAxisMax]),d&&x.rightY().rangeRound([x.yAxisHeight(),0]),x.rightY().range([x.yAxisHeight(),0]),x.rightYAxis(x.rightYAxis().scale(x.rightY())),x.rightYAxis().orient("right"),x.yAxisTickIntegersOnly()&&x.rightYAxis().tickFormat(a.format("d"));var e=x.g().selectAll("g."+u+"."+w);e.empty()&&(e=x.g().append("g").attr("class","axis "+u+" "+w)),e.call(x.rightYAxis()),x.rightYTickLabelPadding=e.node().getBBox().width}function g(b){var c=void 0===x.y()||x.elasticY(),d=c||x.resizing();void 0===x.y()&&x.y(a.scale.linear()),c&&x.y().domain([b.lyAxisMin,b.lyAxisMax]),d&&x.y().rangeRound([x.yAxisHeight(),0]),x.y().range([x.yAxisHeight(),0]),x.yAxis(x.yAxis().scale(x.y())),x.yAxis().orient("left"),x.yAxisTickIntegersOnly()&&x.yAxis().tickFormat(a.format("d"));var e=x.g().selectAll("g."+u+"."+v);e.empty()&&(e=x.g().append("g").attr("class","axis "+u+" "+v)),e.call(x.yAxis()),x.yTickLabelPadding=e.node().getBBox().width}function h(a,b){a._generateG(x.g()),a.g().attr("class",t+" _"+b)}function i(){return y.filter(function(a){return!a.useRightYAxis()})}function j(){return y.filter(function(a){return a.useRightYAxis()})}function k(a){return a.map(function(a){return a.yAxisMin()})}function l(){return a.min(k(i()))}function m(){return a.min(k(j()))}function n(a){return a.map(function(a){return a.yAxisMax()})}function o(){return c.utils.add(a.max(n(i())),x.yAxisPadding())}function p(){return c.utils.add(a.max(n(j())),x.yAxisPadding())}function q(){return y.map(function(a){return a.xAxisMin()})}function r(){return y.map(function(a){return a.xAxisMax()})}var s,t="sub",u="y",v="y-left",w="y-right",x=c.coordinateGridMixin({}),y=[],z={},A=!1,B=!0,C=!1,D=a.svg.axis(),E=0,F=!1;return x._mandatoryAttributes([]),x.transitionDuration(500),c.override(x,"_generateG",function(){for(var a=this.__generateG(),b=0;b<y.length;++b){var c=y[b];h(c,b),c.dimension()||c.dimension(x.dimension()),c.group()||c.group(x.group()),c._parent=x,c.chartGroup(x.chartGroup()),c.svg(x.svg()),c.xUnits(x.xUnits()),c.transitionDuration(x.transitionDuration()),c.brushOn(x.brushOn()),c.renderTitle(x.renderTitle()),c.elasticX(x.elasticX())}return a}),x._brushing=function(){for(var a=x.extendBrush(),b=x.brushIsEmpty(a),c=0;c<y.length;++c)y[c].filter(null),b||y[c].filter(a)},x.prepareAxisLabels=function(a){x.prepareXAxisLabel(a),x.prepareYAxisLabel(a,!1,x.yAxisLabel()),x.prepareYAxisLabel(a,!0,x.rightYAxisLabel())},x._prepareYAxis=function(){var a=0!==i().length,b=0!==j().length,c=e(a,b);a&&g(c),b&&f(c)},x.renderYAxis=function(){0!==i().length&&(x.renderYAxisAt(!1),x.renderYAxisLabel(!1)),0!==j().length&&(x.renderYAxisAt(!0),x.renderYAxisLabel(!0)),i().length>0&&!F?x._renderHorizontalGridLinesForAxis(x.g()):j().length>0&&x._renderHorizontalGridLinesForAxis(x.g())},x.plotData=function(){for(var a=0;a<y.length;++a){var b=y[a];b.g()||h(b,a),A&&b.colors(x.colors()),b.x(x.x()),b.xAxis(x.xAxis()),b.useRightYAxis()?(b.y(x.rightY()),b.yAxis(x.rightYAxis())):(b.y(x.y()),b.yAxis(x.yAxis())),b._generateBody(),b.plotData(),b._activateRenderlets()}},x.useRightAxisGridLines=function(a){return arguments?(F=a,x):F},x.childOptions=function(a){return arguments.length?(z=a,y.forEach(function(a){a.options(z)}),x):z},x.fadeDeselectedArea=function(){for(var a=0;a<y.length;++a){var b=y[a];b.brush(x.brush()),b.fadeDeselectedArea()}},x.rightYAxisLabel=function(a,b){return arguments.length?(E=a,x):E},x.compose=function(a){return y=a,y.forEach(function(a){a.height(x.height()),a.width(x.width()),a.margins(x.margins()),B&&a.title(x.title()),a.options(z)}),x},x.children=function(){return y},x.shareColors=function(a){return arguments.length?(A=a,x):A},x.shareTitle=function(a){return arguments.length?(B=a,x):B},x.rightY=function(a){return arguments.length?(s=a,x.rescale(),x):s},x.alignYAxes=function(a){return arguments.length?(C=a,x.rescale(),x):C},delete x.yAxisMin,delete x.yAxisMax,c.override(x,"xAxisMin",function(){return c.utils.subtract(a.min(q()),x.xAxisPadding())}),c.override(x,"xAxisMax",function(){return c.utils.add(a.max(r()),x.xAxisPadding())}),x.legendables=function(){return y.reduce(function(a,b){return A&&b.colors(x.colors()),a.push.apply(a,b.legendables()),a},[])},x.legendHighlight=function(a){for(var b=0;b<y.length;++b){var c=y[b];c.legendHighlight(a)}},x.legendReset=function(a){for(var b=0;b<y.length;++b){var c=y[b];c.legendReset(a)}},x.legendToggle=function(){console.log("composite should not be getting legendToggle itself")},x.rightYAxis=function(a){return arguments.length?(D=a,x):D},c.override(x,"filterAll",function(){for(var a=this._filterAll(),b=0;b<y.length;++b){var c=y[b];c.filterAll()}return a}),x.anchor(b,d)},c.seriesChart=function(b,d){function e(b,c){return a.ascending(i.keyAccessor()(b),i.keyAccessor()(c))}function f(a){j[a].g()&&j[a].g().remove(),delete j[a]}function g(){Object.keys(j).map(f),j={}}var h,i=c.compositeChart(b,d),j={},k=c.lineChart,l=a.ascending,m=e;return i._mandatoryAttributes().push("seriesAccessor","chart"),i.shareColors(!0),i._preprocessData=function(){var b,c=[],e=a.nest().key(h);l&&e.sortKeys(l),m&&e.sortValues(m);var g=e.entries(i.data()),n=g.map(function(e,f){var g=j[e.key]||k.call(i,i,d,e.key,f);return j[e.key]||(b=!0),j[e.key]=g,c.push(e.key),g.dimension(i.dimension()).group({all:a.functor(e.values)},e.key).keyAccessor(i.keyAccessor()).valueAccessor(i.valueAccessor()).brushOn(i.brushOn())});Object.keys(j).filter(function(a){return-1===c.indexOf(a)}).forEach(function(a){f(a),b=!0}),i._compose(n),b&&i.legend()&&i.legend().render()},i.chart=function(a){return arguments.length?(k=a,g(),i):k},i.seriesAccessor=function(a){return arguments.length?(h=a,g(),i):h},i.seriesSort=function(a){return arguments.length?(l=a,g(),i):l},i.valueSort=function(a){return arguments.length?(m=a,g(),i):m},i._compose=i.compose,delete i.compose,i},c.geoChoroplethChart=function(b,d){function e(a){var b=f();if(g(a)){var c=h(a);n(c,a,b),o(c,a,b)}}function f(){for(var a={},b=p.data(),c=0;c<b.length;++c)a[p.keyAccessor()(b[c])]=p.valueAccessor()(b[c]);return a}function g(a){return m(a).keyAccessor}function h(a){var b=p.svg().selectAll(i(a)).classed("selected",function(b){return j(a,b)}).classed("deselected",function(b){return k(a,b)}).attr("class",function(b){var d=m(a).name,e=c.utils.nameToId(m(a).keyAccessor(b)),f=d+" "+e;return j(a,b)&&(f+=" selected"),k(a,b)&&(f+=" deselected"),f});return b}function i(a){return"g.layer"+a+" g."+m(a).name}function j(a,b){return p.hasFilter()&&p.hasFilter(l(a,b))}function k(a,b){return p.hasFilter()&&!p.hasFilter(l(a,b))}function l(a,b){return m(a).keyAccessor(b)}function m(a){return s[a]}function n(b,d,e){var f=b.select("path").attr("fill",function(){var b=a.select(this).attr("fill");return b?b:"none"}).on("click",function(a){return p.onClick(a,d)});c.transition(f,p.transitionDuration()).attr("fill",function(a,b){return p.getColor(e[m(d).keyAccessor(a)],b)})}function o(a,b,c){p.renderTitle()&&a.selectAll("title").text(function(a){var d=l(b,a),e=c[d];return p.title()({key:d,value:e})})}var p=c.colorMixin(c.baseMixin({}));p.colorAccessor(function(a){return a||0});var q,r=a.geo.path(),s=[];return p._doRender=function(){for(var a=0;a<s.length;++a){var b=p.svg().append("g").attr("class","layer"+a),c=b.selectAll("g."+m(a).name).data(m(a).data).enter().append("g").attr("class",m(a).name);c.append("path").attr("fill","white").attr("d",r),c.append("title"),e(a)}q=!1},p.onClick=function(a,b){var d=m(b).keyAccessor(a);c.events.trigger(function(){p.filter(d),p.redrawGroup()})},p._doRedraw=function(){for(var a=0;a<s.length;++a)e(a),q&&p.svg().selectAll("g."+m(a).name+" path").attr("d",r);q=!1},p.overlayGeoJson=function(a,b,c){for(var d=0;d<s.length;++d)if(s[d].name===b)return s[d].data=a,s[d].keyAccessor=c,p;return s.push({name:b,data:a,keyAccessor:c}),p},p.projection=function(a){return r.projection(a),q=!0,p},p.geoJsons=function(){return s},p.geoPath=function(){return r},p.removeGeoJson=function(a){for(var b=[],c=0;c<s.length;++c){var d=s[c];d.name!==a&&b.push(d)}return s=b,p},p.anchor(b,d)},c.bubbleOverlay=function(b,d){function e(){
return j=n.select("g."+k),j.empty()&&(j=n.svg().append("g").attr("class",k)),j}function f(){var a=g();o.forEach(function(b){var d=h(b,a),e=d.select("circle."+m);e.empty()&&(e=d.append("circle").attr("class",m).attr("r",0).attr("fill",n.getColor).on("click",n.onClick)),c.transition(e,n.transitionDuration()).attr("r",function(a){return n.bubbleR(a)}),n._doRenderLabel(d),n._doRenderTitles(d)})}function g(){var a={};return n.data().forEach(function(b){a[n.keyAccessor()(b)]=b}),a}function h(a,b){var d=l+" "+c.utils.nameToId(a.name),e=j.select("g."+c.utils.nameToId(a.name));return e.empty()&&(e=j.append("g").attr("class",d).attr("transform","translate("+a.x+","+a.y+")")),e.datum(b[a.name]),e}function i(){var a=g();o.forEach(function(b){var d=h(b,a),e=d.select("circle."+m);c.transition(e,n.transitionDuration()).attr("r",function(a){return n.bubbleR(a)}).attr("fill",n.getColor),n.doUpdateLabels(d),n.doUpdateTitles(d)})}var j,k="bubble-overlay",l="node",m="bubble",n=c.bubbleMixin(c.baseMixin({})),o=[];return n.transitionDuration(750),n.radiusValueAccessor(function(a){return a.value}),n.point=function(a,b,c){return o.push({name:a,x:b,y:c}),n},n._doRender=function(){return j=e(),n.r().range([n.MIN_RADIUS,n.width()*n.maxBubbleRelativeSize()]),f(),n.fadeDeselectedArea(),n},n._doRedraw=function(){return i(),n.fadeDeselectedArea(),n},n.debug=function(b){if(b){var d=n.select("g."+c.constants.DEBUG_GROUP_CLASS);d.empty()&&(d=n.svg().append("g").attr("class",c.constants.DEBUG_GROUP_CLASS));var e=d.append("text").attr("x",10).attr("y",20);d.append("rect").attr("width",n.width()).attr("height",n.height()).on("mousemove",function(){var b=a.mouse(d.node()),c=b[0]+", "+b[1];e.text(c)})}else n.selectAll(".debug").remove();return n},n.anchor(b,d),n},c.rowChart=function(b,d){function e(){if(!t||u){var b=a.extent(H.calculateAxisScaleData(),H.cappedValueAccessor);b[0]>0&&(b[0]=0);var c=a.scale.linear().domain(b);t=J?c.range([H.effectiveWidth(),0]):c.range([0,H.effectiveWidth()])}I.scale(t)}function f(){var a=H._g.select("g.axis");g(),e(),a.empty()&&(a=H._g.append("g").attr("class","axis")),a.attr("transform","translate(0, "+H.effectiveHeight()+")"),c.transition(a,H.transitionDuration()).call(I)}function g(){var a=H._g.selectAll("text."+w);a.empty()&&H.xAxisLabel()&&(a=H._g.append("text").attr("class",w).attr("text-anchor","middle")),H.xAxisLabel()&&a.text()!==H.xAxisLabel()&&a.text(H.xAxisLabel()),H._wrapLabels(a,H.effectiveWidth()),H.xAxisLabelPadding=a.node().getBBox().height+10,a.attr("transform","translate("+H.xAxisLength()/2+","+(H.height()-H.xAxisLabelPadding+10)+")"),c.transition(a,H.transitionDuration()).attr("transform","translate("+H.xAxisLength()/2+","+(H.height()-H.xAxisLabelPadding+10)+")")}function h(){H._g.selectAll("g.tick").select("line.grid-line").remove(),H._g.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-H.effectiveHeight()})}function i(){v=H.data(),f(),h();var a=H._g.selectAll("g."+E).data(v);j(a),k(a),m(a)}function j(a){var b=a.enter().append("g").attr("class",function(a,b){return E+" _"+b});b.append("rect").attr("width",0),n(b),o(a)}function k(a){a.exit().remove()}function l(){var a=t(0);return a===-(1/0)||a!==a?t(1):a}function m(a){var b,d=v.length;b=D?D:(H.effectiveHeight()-(d+1)*C)/d,z||(y=b/2);var e=a.attr("transform",function(a,c){var d=(c+1)*C+c*b,e=J?H.effectiveWidth():0;return"translate("+e+","+d+")"}).select("rect").attr("height",b).attr("fill",H.getColor).on("click",p).classed("deselected",function(a){return H.hasFilter()?!r(a):!1}).classed("selected",function(a){return H.hasFilter()?r(a):!1});c.transition(e,H.transitionDuration()).attr("width",function(a){return Math.abs(l()-t(H.valueAccessor()(a)))}).attr("transform",q),H._attachTitle(a),o(a)}function n(a){H.renderLabel()&&a.append("text").on("click",p),H.renderTitleLabel()&&a.append("text").attr("class",F).on("click",p)}function o(a){if(H.renderLabel()){var b=a.select("text").attr("x",J?-x:x).attr("y",y).attr("dy",A).attr("text-anchor",J?"end":"start").on("click",p).attr("class",function(a,b){return E+" _"+b}).text(function(a){return H.label()(a)});c.transition(b,H.transitionDuration()).attr("transform",function(a){return J?"translate(0,0)":q(a)})}if(H.renderTitleLabel()){var d=a.select("."+F).attr("x",J?B-H.effectiveWidth():H.effectiveWidth()-B).attr("y",y).attr("text-anchor",J?"start":"end").on("click",p).attr("class",function(a,b){return F+" _"+b}).text(function(a){return H.title()(a)});c.transition(d,H.transitionDuration()).attr("transform",function(a){return J?"translate(0,0)":q(a)})}}function p(a){H.onClick(a)}function q(a){var b=t(H.cappedValueAccessor(a)),c=l(),d=b>c?c:b;return J&&(d-=H.effectiveWidth()),"translate("+d+",0)"}function r(a){return H.hasFilter(H.cappedKeyAccessor(a))}var s,t,u,v,w="x-axis-label",x=10,y=15,z=!1,A="0.35em",B=2,C=5,D=!1,E="row",F="titlerow",G=!1,H=c.capMixin(c.marginMixin(c.colorMixin(c.baseMixin({})))),I=a.svg.axis().orient("bottom"),J=!1;return H.rowsCap=H.cap,H.calculateAxisScaleData=function(){return v},H._doRender=function(){return H.resetSvg(),H._g=H.svg().append("g").attr("transform","translate("+H.margins().left+","+H.margins().top+")"),i(),H},H.title(function(a){return"<b>"+H.cappedKeyAccessor(a)+":</b> "+H.cappedValueAccessor(a)}),H.label(H.cappedKeyAccessor),H.x=function(a){return arguments.length?(t=a,H):t},H.renderTitleLabel=function(a){return arguments.length?(G=a,H):G},H._doRedraw=function(){return i(),H},H.xAxis=function(){return I},H.fixedBarHeight=function(a){return arguments.length?(D=a,H):D},H.gap=function(a){return arguments.length?(C=a,H):C},H.elasticX=function(a){return arguments.length?(u=a,H):u},H.xAxisLength=function(){return H.effectiveWidth()},H.xAxisLabel=function(a,b){return arguments.length?(s=a,H):s},H.labelOffsetX=function(a){return arguments.length?(x=a,H):x},H.labelOffsetY=function(a){return arguments.length?(y=a,z=!0,H):y},H.titleLabelOffsetX=function(a){return arguments.length?(B=a,H):B},H.useRightYAxis=function(a){return arguments.length?(J=a,H):J},H.anchor(b,d)},c.pairedRowChart=function(b,d){function e(a){g[a]=function(b){return arguments.length?(j[a](b),k[a](b),g):[j[a](),k[a]()]}}function f(a){g[a]=function(){return j[a](),k[a](),g}}var g=c.capMixin(c.marginMixin(c.colorMixin(c.baseMixin({})))),h=a.select(b).append("div").style("width","50%").style("display","inline-block"),i=a.select(b).append("div").style("width","50%").style("display","inline-block"),j=c.rowChart(h[0][0],d),k=c.rowChart(i[0][0],d);j.useRightYAxis(!0);var l=function(a){return a.key[0]},m=function(a){return a.key[0]};g.leftKeyFilter=function(a){return arguments.length?(l=a,g):l},g.rightKeyFilter=function(a){return arguments.length?(m=a,g):m},j.data(function(a){var b=j.cap(),c=a.all().filter(function(a){return g.leftKeyFilter()(a)});return b===1/0?c:c.slice(0,b)}),k.data(function(a){var b=k.cap(),c=a.all().filter(function(a){return g.rightKeyFilter()(a)});return b===1/0?c:c.slice(0,b)}),j.onClick=k.onClick=function(a){var b=j.keyAccessor()(a);c.events.trigger(function(){j.filter(b),k.filter(b),j.redrawGroup()})};var n=j.margins,o=k.margins;j.margins=function(){var a=n();return a.right=0,a},k.margins=function(){var a=o();return a.left=0,a},g.svg=function(){return a.selectAll([j.svg()[0][0],k.svg()[0][0]])},j.calculateAxisScaleData=k.calculateAxisScaleData=function(){return j.data().concat(k.data())},g.leftChart=function(){return j},g.rightChart=function(){return k},g.leftXAxisLabel=function(a,b){return j.xAxisLabel(a,b)},g.rightXAxisLabel=function(a,b){return k.xAxisLabel(a,b)};for(var p=["height","minHeight","renderTitleLabel","fixedBarHeight","gap","othersLabel","transitionDuration","label","renderLabel","title","renderTitle","chartGroup","colors","ordinalColors","linearColors","colorAccessor","colorDomain","getColor","colorCalculator","x","elasticX","valueAccessor","labelOffsetX","titleLabelOffsetx","xAxis","keyAccessor","labelOffsetY","yAxis","cap","ordering","dimension","group","othersGrouper","data"],q=0;q<p.length;q++)e(p[q]);var r=["_doRedraw","redraw","_doRender","render","calculateColorDomain","filterAll","resetSvg","expireCache"];for(q=0;q<r.length;q++)f(r[q]);return g.anchor(b,d)},c.legend=function(){function a(){var a=0,b=0,c=!1;switch(l){case"top":a=d.width()/2,b=f,c=!0;break;case"bottom":a=d.width()/2,b=d.height()-f,c=!0;break;case"left":a=f,b=d.height()/2,c=!1;break;case"right":a=d.width()-f,b=d.height()/2,c=!1}return{x:a,y:b,horizontal:c}}function b(a){var b=e.node().getBBox();switch(l){case"top":d.legendTopPadding=b.height,a.x-=b.width/2;break;case"bottom":d.legendBottomPadding=b.height,a.x-=b.width/2,a.y-=b.height;break;case"left":d.legendLeftPadding=b.width,a.y-=b.height/2;break;case"right":d.legendRightPadding=b.width,a.x-=b.width,a.y-=b.height/2}return a.x+","+a.y}var d,e,f=5,g=4,h="dc-legend",i="dc-legend-item",j={},k=12,l="bottom",m=c.pluck("name");return j.parent=function(a){return arguments.length?(d=a,j):d},j.render=function(){var f=a();d.svg().select("g."+h).remove(),e=d.svg().append("g").attr("class",h);var j=d.legendables(),l=e.selectAll("g."+i).data(j).enter().append("g").attr("class",i).on("mouseover",function(a){d.legendHighlight(a)}).on("mouseout",function(a){d.legendReset(a)}).on("click",function(a){a.chart.legendToggle(a)});e.selectAll("g."+i).classed("fadeout",function(a){return a.chart.isLegendableHidden(a)}),j.some(c.pluck("dashstyle"))?l.append("line").attr("x1",0).attr("y1",k/2).attr("x2",k).attr("y2",k/2).attr("stroke-width",2).attr("stroke-dasharray",c.pluck("dashstyle")).attr("stroke",c.pluck("color")):l.append("rect").attr("width",k).attr("height",k).attr("fill",function(a){return a?a.color:"blue"}),l.append("text").text(m).attr("x",k+g).attr("y",function(){return k/2+(this.clientHeight?this.clientHeight:13)/2-2});var n=0,o=0;l.attr("transform",function(a,b){if(f.horizontal){var c=this.getBBox().width+g;n+=c,n>=d.width()&&(++o,n=c);var e={x:n-c,y:o*(k+g)};return"translate("+e.x+", "+e.y+")"}return"translate(0,"+b*(k+g)+")"}),e.attr("transform","translate("+b(f)+")")},j.position=function(a){return arguments.length?(l=a,j):l},j.legendText=function(a){return arguments.length?(m=a,j):m},j},c.scatterPlot=function(b,d){function e(b,d){var e=g.selectAll(".chart-body path.symbol").filter(function(){return b(a.select(this))}),f=h.size();h.size(Math.pow(d,2)),c.transition(e,g.transitionDuration()).attr("d",h),h.size(f)}function f(a){var b=g.selectAll(".chart-body path.symbol").each(function(b){this.filtered=a&&a.isFiltered(b.key)});c.transition(b,g.transitionDuration()).attr("d",h)}var g=c.coordinateGridMixin({}),h=a.svg.symbol(),i=function(a){return a.value},j=g.keyAccessor();g.keyAccessor(function(a){return j(a)[0]}),g.valueAccessor(function(a){return j(a)[1]}),g.colorAccessor(function(){return g._groupName});var k=function(a){return"translate("+g.x()(g.keyAccessor()(a))+","+g.y()(g.valueAccessor()(a))+")"},l=3,m=5,n=0;return h.size(function(a){return i(a)?this.filtered?Math.pow(m,2):Math.pow(l,2):n}),c.override(g,"_filter",function(a){return arguments.length?g.__filter(c.filters.RangedTwoDimensionalFilter(a)):g.__filter()}),g.plotData=function(){var a=g.chartBodyG().selectAll("path.symbol").data(g.data());a.enter().append("path").attr("class","symbol").attr("opacity",0).attr("fill",g.getColor).attr("transform",k),c.transition(a,g.transitionDuration()).attr("opacity",function(a){return i(a)?1:0}).attr("fill",g.getColor).attr("transform",k).attr("d",h),c.transition(a.exit(),g.transitionDuration()).attr("opacity",0).remove()},g.existenceAccessor=function(a){return arguments.length?(i=a,this):i},g.symbol=function(a){return arguments.length?(h.type(a),g):h.type()},g.symbolSize=function(a){return arguments.length?(l=a,g):l},g.highlightedSize=function(a){return arguments.length?(m=a,g):m},g.hiddenSize=function(a){return arguments.length?(n=a,g):n},g.legendables=function(){return[{chart:g,name:g._groupName,color:g.getColor()}]},g.legendHighlight=function(b){e(function(a){return a.attr("fill")===b.color},m),g.selectAll(".chart-body path.symbol").filter(function(){return a.select(this).attr("fill")!==b.color}).classed("fadeout",!0)},g.legendReset=function(b){e(function(a){return a.attr("fill")===b.color},l),g.selectAll(".chart-body path.symbol").filter(function(){return a.select(this).attr("fill")!==b.color}).classed("fadeout",!1)},g.setHandlePaths=function(){},g.extendBrush=function(){var a=g.brush().extent();return g.round()&&(a[0]=a[0].map(g.round()),a[1]=a[1].map(g.round()),g.g().select(".brush").call(g.brush().extent(a))),a},g.brushIsEmpty=function(a){return g.brush().empty()||!a||a[0][0]>=a[1][0]||a[0][1]>=a[1][1]},g._brushing=function(){var a=g.extendBrush();if(g.redrawBrush(g.g()),g.brushIsEmpty(a))c.events.trigger(function(){g.filter(null),g.redrawGroup()}),f(!1);else{var b=c.filters.RangedTwoDimensionalFilter(a);c.events.trigger(function(){g.filter(null),g.filter(b),g.redrawGroup()},c.constants.EVENT_DELAY),f(b)}},g.setBrushY=function(a){a.call(g.brush().y(g.y()))},g.anchor(b,d)},c.numberDisplay=function(b,d){var e="number-display",f=a.format(".2s"),g=c.baseMixin({}),h={one:"",some:"",none:""};return g._mandatoryAttributes(["group"]),g.html=function(a){return arguments.length?(a.none?h.none=a.none:a.one?h.none=a.one:a.some&&(h.none=a.some),a.one?h.one=a.one:a.some&&(h.one=a.some),a.some?h.some=a.some:a.one&&(h.some=a.one),g):h},g.value=function(){return g.data()},g.data(function(a){var b=a.value?a.value():a.top(1)[0];return g.valueAccessor()(b)}),g.transitionDuration(250),g._doRender=function(){var b=g.value(),c=g.selectAll("."+e);c.empty()&&(c=c.data([0]).enter().append("span").attr("class",e)),c.transition().duration(g.transitionDuration()).ease("quad-out-in").tween("text",function(){var c=a.interpolateNumber(this.lastValue||0,b);return this.lastValue=b,function(a){var d=null,e=g.formatNumber()(c(a));0===b&&""!==h.none?d=h.none:1===b&&""!==h.one?d=h.one:""!==h.some&&(d=h.some),this.innerHTML=d?d.replace("%number",e):e}})},g._doRedraw=function(){return g._doRender()},g.formatNumber=function(a){return arguments.length?(f=a,g):f},g.anchor(b,d)},c.heatMap=function(b,d){function e(a,b){var d=p.selectAll(".box-group").filter(function(c){return c.key[a]===b}),e=d.filter(function(a){return!p.hasFilter(a.key)});c.events.trigger(function(){e.empty()?d.each(function(a){p.filter(a.key)}):e.each(function(a){p.filter(a.key)}),p.redrawGroup()})}var f,g,h,i=6.75,j=a.ascending,k=a.ascending,l=a.scale.ordinal(),m=a.scale.ordinal(),n=i,o=i,p=c.colorMixin(c.marginMixin(c.baseMixin({})));p._mandatoryAttributes(["group"]),p.title(p.colorAccessor());var q=function(a){return a},r=function(a){return a};p.colsLabel=function(a){return arguments.length?(q=a,p):q},p.rowsLabel=function(a){return arguments.length?(r=a,p):r};var s=function(a){e(0,a)},t=function(a){e(1,a)},u=function(a){var b=a.key;c.events.trigger(function(){p.filter(b),p.redrawGroup()})};return c.override(p,"filter",function(a){return arguments.length?p._filter(c.filters.TwoDimensionalFilter(a)):p._filter()}),p.rows=function(a){return arguments.length?(h=a,p):h},p.rowOrdering=function(a){return arguments.length?(k=a,p):k},p.cols=function(a){return arguments.length?(g=a,p):g},p.colOrdering=function(a){return arguments.length?(j=a,p):j},p._doRender=function(){return f=p.svg().append("g").attr("class","heatmap").attr("transform","translate("+p.margins().left+","+p.margins().top+")"),p._doRedraw()},p._doRedraw=function(){var a=p.data(),b=p.rows()||a.map(p.valueAccessor()),d=p.cols()||a.map(p.keyAccessor());k&&(b=b.sort(k)),j&&(d=d.sort(j)),b=m.domain(b),d=l.domain(d);var e=b.domain().length,g=d.domain().length,h=Math.floor(p.effectiveWidth()/g),i=Math.floor(p.effectiveHeight()/e);d.rangeRoundBands([0,p.effectiveWidth()]),b.rangeRoundBands([p.effectiveHeight(),0]);var q=f.selectAll("g.box-group").data(p.data(),function(a,b){return p.keyAccessor()(a,b)+"\x00"+p.valueAccessor()(a,b)}),r=q.enter().append("g").attr("class","box-group");r.append("rect").attr("class","heat-box").attr("fill","white").on("click",p.boxOnClick()),p.renderTitle()&&(r.append("title"),q.selectAll("title").text(p.title())),c.transition(q.selectAll("rect"),p.transitionDuration()).attr("x",function(a,b){return d(p.keyAccessor()(a,b))}).attr("y",function(a,c){return b(p.valueAccessor()(a,c))}).attr("rx",n).attr("ry",o).attr("fill",p.getColor).attr("width",h).attr("height",i),q.exit().remove();var s=f.selectAll("g.cols");s.empty()&&(s=f.append("g").attr("class","cols axis"));var t=s.selectAll("text").data(d.domain());t.enter().append("text").attr("x",function(a){return d(a)+h/2}).style("text-anchor","middle").attr("y",p.effectiveHeight()).attr("dy",12).on("click",p.xAxisOnClick()).text(p.colsLabel()),c.transition(t,p.transitionDuration()).text(p.colsLabel()).attr("x",function(a){return d(a)+h/2}).attr("y",p.effectiveHeight()),t.exit().remove();var u=f.selectAll("g.rows");u.empty()&&(u=f.append("g").attr("class","rows axis"));var v=u.selectAll("text").data(b.domain());return v.enter().append("text").attr("dy",6).style("text-anchor","end").attr("x",0).attr("dx",-2).on("click",p.yAxisOnClick()).text(p.rowsLabel()),c.transition(v,p.transitionDuration()).text(p.rowsLabel()).attr("y",function(a){return b(a)+i/2}),v.exit().remove(),p.hasFilter()?p.selectAll("g.box-group").each(function(a){p.isSelectedNode(a)?p.highlightSelected(this):p.fadeDeselected(this)}):p.selectAll("g.box-group").each(function(){p.resetHighlight(this)}),p},p.boxOnClick=function(a){return arguments.length?(u=a,p):u},p.xAxisOnClick=function(a){return arguments.length?(s=a,p):s},p.yAxisOnClick=function(a){return arguments.length?(t=a,p):t},p.xBorderRadius=function(a){return arguments.length?(n=a,p):n},p.yBorderRadius=function(a){return arguments.length?(o=a,p):o},p.isSelectedNode=function(a){return p.hasFilter(a.key)},p.anchor(b,d)},function(){function b(a){return[0,a.length-1]}function c(b){return[a.quantile(b,.25),a.quantile(b,.5),a.quantile(b,.75)]}a.box=function(){function d(b){b.each(function(b,c){b=b.map(i).sort(a.ascending);var d=a.select(this),m=b.length,n=b[0],o=b[m-1],p=b.quartiles=k(b),q=j&&j.call(this,b,c),r=q&&q.map(function(a){return b[a]}),s=q?a.range(0,q[0]).concat(a.range(q[1]+1,m)):a.range(m),t=a.scale.linear().domain(h&&h.call(this,b,c)||[n,o]).range([f,0]),u=this.__chart__||a.scale.linear().domain([0,1/0]).range(t.range());this.__chart__=t;var v=d.selectAll("line.center").data(r?[r]:[]);v.enter().insert("line","rect").attr("class","center").attr("x1",e/2).attr("y1",function(a){return u(a[0])}).attr("x2",e/2).attr("y2",function(a){return u(a[1])}).style("opacity",1e-6).transition().duration(g).style("opacity",1).attr("y1",function(a){return t(a[0])}).attr("y2",function(a){return t(a[1])}),v.transition().duration(g).style("opacity",1).attr("y1",function(a){return t(a[0])}).attr("y2",function(a){return t(a[1])}),v.exit().transition().duration(g).style("opacity",1e-6).attr("y1",function(a){return t(a[0])}).attr("y2",function(a){return t(a[1])}).remove();var w=d.selectAll("rect.box").data([p]);w.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(a){return u(a[2])}).attr("width",e).attr("height",function(a){return u(a[0])-u(a[2])}).transition().duration(g).attr("y",function(a){return t(a[2])}).attr("height",function(a){return t(a[0])-t(a[2])}),w.transition().duration(g).attr("y",function(a){return t(a[2])}).attr("height",function(a){return t(a[0])-t(a[2])});var x=d.selectAll("line.median").data([p[1]]);x.enter().append("line").attr("class","median").attr("x1",0).attr("y1",u).attr("x2",e).attr("y2",u).transition().duration(g).attr("y1",t).attr("y2",t),x.transition().duration(g).attr("y1",t).attr("y2",t);var y=d.selectAll("line.whisker").data(r||[]);y.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",u).attr("x2",e).attr("y2",u).style("opacity",1e-6).transition().duration(g).attr("y1",t).attr("y2",t).style("opacity",1),y.transition().duration(g).attr("y1",t).attr("y2",t).style("opacity",1),y.exit().transition().duration(g).attr("y1",t).attr("y2",t).style("opacity",1e-6).remove();var z=d.selectAll("circle.outlier").data(s,Number);z.enter().insert("circle","text").attr("class","outlier").attr("r",5).attr("cx",e/2).attr("cy",function(a){return u(b[a])}).style("opacity",1e-6).transition().duration(g).attr("cy",function(a){return t(b[a])}).style("opacity",1),z.transition().duration(g).attr("cy",function(a){return t(b[a])}).style("opacity",1),z.exit().transition().duration(g).attr("cy",function(a){return t(b[a])}).style("opacity",1e-6).remove();var A=l||t.tickFormat(8),B=d.selectAll("text.box").data(p);B.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(a,b){return 1&b?6:-6}).attr("x",function(a,b){return 1&b?e:0}).attr("y",u).attr("text-anchor",function(a,b){return 1&b?"start":"end"}).text(A).transition().duration(g).attr("y",t),B.transition().duration(g).text(A).attr("y",t);var C=d.selectAll("text.whisker").data(r||[]);C.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",e).attr("y",u).text(A).style("opacity",1e-6).transition().duration(g).attr("y",t).style("opacity",1),C.transition().duration(g).text(A).attr("y",t).style("opacity",1),C.exit().transition().duration(g).attr("y",t).style("opacity",1e-6).remove()}),a.timer.flush()}var e=1,f=1,g=0,h=null,i=Number,j=b,k=c,l=null;return d.width=function(a){return arguments.length?(e=a,d):e},d.height=function(a){return arguments.length?(f=a,d):f},d.tickFormat=function(a){return arguments.length?(l=a,d):l},d.duration=function(a){return arguments.length?(g=a,d):g},d.domain=function(b){return arguments.length?(h=null===b?b:a.functor(b),d):h},d.value=function(a){return arguments.length?(i=a,d):i},d.whiskers=function(a){return arguments.length?(j=a,d):j},d.quartiles=function(a){return arguments.length?(k=a,d):k},d}}(),c.boxPlot=function(b,d){function e(a){return function(b){var c=b.quartiles[0],d=b.quartiles[2],e=(d-c)*a,f=-1,g=b.length;do++f;while(b[f]<c-e);do--g;while(b[g]>d+e);return[f,g]}}function f(a){var b=a.enter().append("g");b.attr("class","box").attr("transform",p).call(m).on("click",function(a){i.filter(a.key),i.redrawGroup()})}function g(b){c.transition(b,i.transitionDuration()).attr("transform",p).call(m).each(function(){a.select(this).select("rect.box").attr("fill",i.getColor)})}function h(a){a.exit().remove().call(m)}var i=c.coordinateGridMixin({}),j=1.5,k=e,l=k(j),m=a.box(),n=null,o=function(a,b){return i.isOrdinal()?i.x().rangeBand():a/(1+i.boxPadding())/b};i.yAxisPadding(12),i.x(a.scale.ordinal()),i.xUnits(c.units.ordinal),i.data(function(a){return a.all().map(function(a){return a.map=function(b){return b.call(a,a)},a}).filter(function(a){var b=i.valueAccessor()(a);return 0!==b.length})}),i.boxPadding=i._rangeBandPadding,i.boxPadding(.8),i.outerPadding=i._outerRangeBandPadding,i.outerPadding(.5),i.boxWidth=function(b){return arguments.length?(o=a.functor(b),i):o};var p=function(a,b){var c=i.x()(i.keyAccessor()(a,b));return"translate("+c+", 0)"};return i._preprocessData=function(){i.elasticX()&&i.x().domain([])},i.plotData=function(){var a=o(i.effectiveWidth(),i.xUnitCount());m.whiskers(l).width(a).height(i.effectiveHeight()).value(i.valueAccessor()).domain(i.y().domain()).duration(i.transitionDuration()).tickFormat(n);var b=i.chartBodyG().selectAll("g.box").data(i.data(),function(a){return a.key});f(b),g(b),h(b),i.fadeDeselectedArea()},i.fadeDeselectedArea=function(){i.hasFilter()?i.g().selectAll("g.box").each(function(a){i.isSelectedNode(a)?i.highlightSelected(this):i.fadeDeselected(this)}):i.g().selectAll("g.box").each(function(){i.resetHighlight(this)})},i.isSelectedNode=function(a){return i.hasFilter(a.key)},i.yAxisMin=function(){var b=a.min(i.data(),function(b){return a.min(i.valueAccessor()(b))});return c.utils.subtract(b,i.yAxisPadding())},i.yAxisMax=function(){var b=a.max(i.data(),function(b){return a.max(i.valueAccessor()(b))});return c.utils.add(b,i.yAxisPadding())},i.tickFormat=function(a){return arguments.length?(n=a,i):n},i.anchor(b,d)},c.selectMenu=function(b,d){function e(){var a=h.selectAll("option."+j).data(k.data(),function(a){return k.keyAccessor()(a)});return a.enter().append("option").classed(j,!0).attr("value",function(a){return k.keyAccessor()(a)}),a.text(k.title()),a.exit().remove(),h.selectAll("option."+j).sort(o),h.on("change",f),a}function f(b,c){var d,e=a.event.target;if(e.selectedOptions){var f=Array.prototype.slice.call(e.selectedOptions);d=f.map(function(a){return a.value})}else{var g=[].slice.call(a.event.target.options);d=g.filter(function(a){return a.selected}).map(function(a){return a.value})}1===d.length&&""===d[0]?d=null:m||1!==d.length||(d=d[0]),k.onChange(d)}function g(){m?h.attr("multiple",!0):h.attr("multiple",null),null!==n?h.attr("size",n):h.attr("size",null)}var h,i="dc-select-menu",j="dc-select-option",k=c.baseMixin({}),l="Select all",m=!1,n=null,o=function(a,b){return k.keyAccessor()(a)>k.keyAccessor()(b)?1:k.keyAccessor()(b)>k.keyAccessor()(a)?-1:0},p=function(a){return k.valueAccessor()(a)>0};return k.data(function(a){return a.all().filter(p)}),k._doRender=function(){return k.select("select").remove(),h=k.root().append("select").classed(i,!0),h.append("option").text(l).attr("value",""),k._doRedraw(),k},k._doRedraw=function(){return g(),e(),k.hasFilter()&&m?h.selectAll("option").property("selected",function(a){return a&&k.filters().indexOf(String(k.keyAccessor()(a)))>=0}):k.hasFilter()?h.property("value",k.filter()):h.property("value",""),k},k.onChange=function(a){a&&m?k.replaceFilter([a]):a?k.replaceFilter(a):k.filterAll(),c.events.trigger(function(){k.redrawGroup()})},k.order=function(a){return arguments.length?(o=a,k):o},k.promptText=function(a){return arguments.length?(l=a,k):l},k.filterDisplayed=function(a){return arguments.length?(p=a,k):p},k.multiple=function(a){return arguments.length?(m=a,k):m},k.size=function(a){return arguments.length?(n=a,k):n},k.anchor(b,d)},c.abstractBubbleChart=c.bubbleMixin,c.baseChart=c.baseMixin,c.capped=c.capMixin,c.colorChart=c.colorMixin,c.coordinateGridChart=c.coordinateGridMixin,c.marginable=c.marginMixin,c.stackableChart=c.stackMixin,c.d3=a,c.crossfilter=b,c}if("function"==typeof define&&define.amd)define(["d3","crossfilter"],a);else if("object"==typeof module&&module.exports){var b=require("d3"),c=require("crossfilter");"function"!=typeof c&&(c=c.crossfilter),module.exports=a(b,c)}else this.dc=a(d3,crossfilter)}();
//# sourceMappingURL=dc.min.js.map