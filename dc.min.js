!function(){function a(a,b){"use strict";var c={version:"1.7.3",constants:{CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},_renderlet:null};return c.chartRegistry=function(){function a(a){return a||(a=c.constants.DEFAULT_CHART_GROUP),b[a]||(b[a]=[]),a}var b={};return{has:function(a){for(var c in b)if(b[c].indexOf(a)>=0)return!0;return!1},register:function(c,d){d=a(d),b[d].push(c)},clear:function(){b={}},list:function(c){return c=a(c),b[c]}}}(),c.registerChart=function(a,b){c.chartRegistry.register(a,b)},c.hasChart=function(a){return c.chartRegistry.has(a)},c.deregisterAllCharts=function(){c.chartRegistry.clear()},c.filterAll=function(a){for(var b=c.chartRegistry.list(a),d=0;d<b.length;++d)b[d].filterAll()},c.renderAll=function(a){for(var b=c.chartRegistry.list(a),d=0;d<b.length;++d)b[d].render();null!==c._renderlet&&c._renderlet(a)},c.redrawAll=function(a){for(var b=c.chartRegistry.list(a),d=0;d<b.length;++d)b[d].redraw();null!==c._renderlet&&c._renderlet(a)},c.transition=function(a,b,c){if(0>=b||void 0===b)return a;var d=a.transition().duration(b);return c instanceof Function&&c(d),d},c.units={},c.units.integers=function(a,b){return Math.abs(b-a)},c.units.ordinal=function(a,b,c){return c},c.units.fp={},c.units.fp.precision=function(a){var b=function(a,d){var e=Math.abs((d-a)/b.resolution);return c.utils.isNegligible(e-Math.floor(e))?Math.floor(e):Math.ceil(e)};return b.resolution=a,b},c.round={},c.round.floor=function(a){return Math.floor(a)},c.round.ceil=function(a){return Math.ceil(a)},c.round.round=function(a){return Math.round(a)},c.override=function(a,b,c){var d=a[b];a["_"+b]=d,a[b]=c},c.renderlet=function(a){return arguments.length?(c._renderlet=a,c):c._renderlet},c.instanceOfChart=function(a){return a instanceof Object&&a.__dc_flag__},c.errors={},c.errors.Exception=function(a){var b=void 0!==a?a:"Unexpected internal error";this.message=b,this.toString=function(){return b}},c.errors.InvalidStateException=function(){c.errors.Exception.apply(this,arguments)},c.dateFormat=a.time.format("%m/%d/%Y"),c.printers={},c.printers.filters=function(a){for(var b="",d=0;d<a.length;++d)d>0&&(b+=", "),b+=c.printers.filter(a[d]);return b},c.printers.filter=function(a){var b="";return a&&(a instanceof Array?a.length>=2?b="["+c.utils.printSingleValue(a[0])+" -> "+c.utils.printSingleValue(a[1])+"]":a.length>=1&&(b=c.utils.printSingleValue(a[0])):b=c.utils.printSingleValue(a)),b},c.utils={},c.utils.printSingleValue=function(a){var b=""+a;return a instanceof Date?b=c.dateFormat(a):"string"==typeof a?b=a:c.utils.isFloat(a)?b=c.utils.printSingleValue.fformat(a):c.utils.isInteger(a)&&(b=Math.round(a)),b},c.utils.printSingleValue.fformat=a.format(".2f"),c.utils.add=function(a,b){if("string"==typeof b&&(b=b.replace("%","")),a instanceof Date){"string"==typeof b&&(b=+b);var c=new Date;return c.setTime(a.getTime()),c.setDate(a.getDate()+b),c}if("string"==typeof b){var d=+b/100;return a>0?a*(1+d):a*(1-d)}return a+b},c.utils.subtract=function(a,b){if("string"==typeof b&&(b=b.replace("%","")),a instanceof Date){"string"==typeof b&&(b=+b);var c=new Date;return c.setTime(a.getTime()),c.setDate(a.getDate()-b),c}if("string"==typeof b){var d=+b/100;return 0>a?a*(1+d):a*(1-d)}return a-b},c.utils.GroupStack=function(){function a(a){c[a]||(c[a]=[])}var b,c=[[]],d=[];this.setDataPoint=function(b,d,e){a(b),c[b][d]=e},this.getDataPoint=function(b,d){a(b);var e=c[b][d];return void 0===e&&(e=0),e},this.addGroup=function(a,c){return c||(c=b),d.push([a,c]),d.length-1},this.getGroupByIndex=function(a){return d[a][0]},this.getAccessorByIndex=function(a){return d[a][1]},this.size=function(){return d.length},this.clear=function(){c=[],d=[]},this.setDefaultAccessor=function(a){b=a},this.getDataLayers=function(){return c},this.toLayers=function(){for(var a=[],b=0;b<c.length;++b){for(var d={index:b,points:[]},e=c[b],f=0;f<e.length;++f)d.points.push(e[f]);a.push(d)}return a}},c.utils.isNumber=function(a){return a===+a},c.utils.isFloat=function(a){return a===+a&&a!==(0|a)},c.utils.isInteger=function(a){return a===+a&&a===(0|a)},c.utils.isNegligible=function(a){return void 0===a||a<c.constants.NEGLIGIBLE_NUMBER&&a>-c.constants.NEGLIGIBLE_NUMBER},c.utils.groupMax=function(b,d){var e=a.max(b.all(),function(a){return d(a)});return c.utils.isNegligible(e)&&(e=0),e},c.utils.groupMin=function(b,d){var e=a.min(b.all(),function(a){return d(a)});return c.utils.isNegligible(e)&&(e=0),e},c.utils.nameToId=function(a){return a.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},c.utils.appendOrSelect=function(a,b){var c=a.select(b);return c.empty()&&(c=a.append(b)),c},c.utils.createLegendable=function(a,b,c,d){var e={name:a._getGroupName(b,d),data:b};return"function"==typeof a.colors&&(e.color=a.colors()(c)),e},c.utils.safeNumber=function(a){return c.utils.isNumber(+a)?+a:0},c.events={current:null},c.events.trigger=function(a,b){return b?(c.events.current=a,void setTimeout(function(){a==c.events.current&&a()},b)):void a()},c.cumulative={},c.cumulative.Base=function(){this._keyIndex=[],this._map={},this.sanitizeKey=function(a){return a+=""},this.clear=function(){this._keyIndex=[],this._map={}},this.size=function(){return this._keyIndex.length},this.getValueByKey=function(a){a=this.sanitizeKey(a);var b=this._map[a];return b},this.setValueByKey=function(a,b){return a=this.sanitizeKey(a),this._map[a]=b},this.indexOfKey=function(a){return a=this.sanitizeKey(a),this._keyIndex.indexOf(a)},this.addToIndex=function(a){a=this.sanitizeKey(a),this._keyIndex.push(a)},this.getKeyByIndex=function(a){return this._keyIndex[a]}},c.cumulative.Sum=function(){c.cumulative.Base.apply(this,arguments),this.add=function(a,b){b||(b=0),void 0===this.getValueByKey(a)?(this.addToIndex(a),this.setValueByKey(a,b)):this.setValueByKey(a,this.getValueByKey(a)+b)},this.minus=function(a,b){this.setValueByKey(a,this.getValueByKey(a)-b)},this.cumulativeSum=function(a){var b=this.indexOfKey(a);if(0>b)return 0;for(var c=0,d=0;b>=d;++d){var e=this.getKeyByIndex(d);c+=this.getValueByKey(e)}return c}},c.cumulative.Sum.prototype=new c.cumulative.Base,c.cumulative.CountUnique=function(){function a(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c}c.cumulative.Base.apply(this,arguments),this.add=function(a,b){void 0===this.getValueByKey(a)&&(this.setValueByKey(a,{}),this.addToIndex(a)),void 0!==b&&(void 0===this.getValueByKey(a)[b]&&(this.getValueByKey(a)[b]=0),this.getValueByKey(a)[b]+=1)},this.minus=function(a,b){this.getValueByKey(a)[b]-=1,this.getValueByKey(a)[b]<=0&&delete this.getValueByKey(a)[b]},this.count=function(b){return a(this.getValueByKey(b))},this.cumulativeCount=function(a){var b=this.indexOfKey(a);if(0>b)return 0;for(var c=0,d=0;b>=d;++d){var e=this.getKeyByIndex(d);c+=this.count(e)}return c}},c.cumulative.CountUnique.prototype=new c.cumulative.Base,c.baseChart=function(d){function e(a,b,c){var d=a.anchor(),e="__names__";c&&c!=a.valueAccessor()||(c="default"),b[e]||(b[e]={}),b[e][d]||(b[e][d]={a:[],n:[]});var f=b[e][d].a.indexOf(c);return-1==f&&(f=b[e][d].a.length,b[e][d].a[f]=c,b[e][d].n[f]={name:""}),b[e][d].n[f]}function f(){return p=d.root().append("svg").attr("width",d.width()).attr("height",d.height())}function g(a){G.splice(G.indexOf(a),1),j(),d._invokeFilteredListener(a)}function h(a){G.push(a),j(),d._invokeFilteredListener(a)}function i(){G=[],j(),d._invokeFilteredListener(null)}function j(){if(d.dataSet()&&void 0!==d.dimension().filter){var a=H(d.dimension(),G);G=a?a:G}}function k(){for(var a=0;a<C.length;++a)C[a](d)}d.__dc_flag__=!0;var l,m,n,o,p,q,r=200,s=200,t=function(a){return a.key},u=function(a){return a.value},v=function(a){return a.key},w=function(a){return a.key},x=!1,y=function(a){return a.key+": "+a.value},z=!1,A=750,B=c.printers.filters,C=[],D=c.constants.DEFAULT_CHART_GROUP,E=function(){},F={preRender:E,postRender:E,preRedraw:E,postRedraw:E,filtered:E,zoomed:E},G=[],H=function(a,b){return a.filter(null),0===b.length?a.filter(null):1===b.length?a.filter(b[0]):a.filterFunction(function(a){return b.indexOf(a)>=0}),b};return d.width=function(a){return arguments.length?(r=a,d):r},d.height=function(a){return arguments.length?(s=a,d):s},d.dimension=function(a){return arguments.length?(l=a,d.expireCache(),d):l},d.group=function(a,b){return arguments.length?(m=a,d.expireCache(),"string"==typeof b&&d._setGroupName(m,b),d):m},d._getGroupName=function(a,b){return e(d,a,b).name},d._setGroupName=function(a,b,c){e(d,a,c).name=b},d.ordering=function(a){return arguments.length?(v=a,d.expireCache(),d):v},d.computeOrderedGroups=function(a){var c=a?a:d.group().all().slice(0);if(c.length<2)return c;var e=b.quicksort.by(d.ordering());return e(c,0,c.length)},d.filterAll=function(){return d.filter(null)},d.dataSet=function(){return void 0!==l&&void 0!==m},d.select=function(a){return o.select(a)},d.selectAll=function(a){return o?o.selectAll(a):null},d.anchor=function(b,e){return arguments.length?(c.instanceOfChart(b)?(n=b.anchor(),o=b.root()):(n=b,o=a.select(n),o.classed(c.constants.CHART_CLASS,!0),c.registerChart(d,e)),D=e,d):n},d.anchorName=function(){var a=d.anchor();return a&&a.id?a.id:a?a.replace("#",""):""},d.root=function(a){return arguments.length?(o=a,d):o},d.svg=function(a){return arguments.length?(p=a,d):p},d.resetSvg=function(){return d.select("svg").remove(),f()},d.filterPrinter=function(a){return arguments.length?(B=a,d):B},d.turnOnControls=function(){return o&&(d.selectAll(".reset").style("display",null),d.selectAll(".filter").text(B(d.filters())).style("display",null)),d},d.turnOffControls=function(){return o&&(d.selectAll(".reset").style("display","none"),d.selectAll(".filter").style("display","none").text(d.filter())),d},d.transitionDuration=function(a){return arguments.length?(A=a,d):A},d.render=function(){if(F.preRender(d),void 0===l)throw new c.errors.InvalidStateException("Mandatory attribute chart.dimension is missing on chart[#"+d.anchorName()+"]");if(void 0===m)throw new c.errors.InvalidStateException("Mandatory attribute chart.group is missing on chart[#"+d.anchorName()+"]");var a=d.doRender();return q&&q.render(),d.activateRenderlets("postRender"),a},d.activateRenderlets=function(a){d.transitionDuration()>0&&p?p.transition().duration(d.transitionDuration()).each("end",function(){k(),a&&F[a](d)}):(k(),a&&F[a](d))},d.redraw=function(){F.preRedraw(d);var a=d.doRedraw();return d.activateRenderlets("postRedraw"),a},d._invokeFilteredListener=function(a){void 0!==a&&F.filtered(d,a)},d._invokeZoomedListener=function(){F.zoomed(d)},d.hasFilter=function(a){return arguments.length?G.indexOf(a)>=0:G.length>0},d.filter=function(a){return arguments.length?(null===a?i():d.hasFilter(a)?g(a):h(a),null!==o&&d.hasFilter()?d.turnOnControls():d.turnOffControls(),d):G.length>0?G[0]:null},d.filters=function(){return G},d.highlightSelected=function(b){a.select(b).classed(c.constants.SELECTED_CLASS,!0),a.select(b).classed(c.constants.DESELECTED_CLASS,!1)},d.fadeDeselected=function(b){a.select(b).classed(c.constants.SELECTED_CLASS,!1),a.select(b).classed(c.constants.DESELECTED_CLASS,!0)},d.resetHighlight=function(b){a.select(b).classed(c.constants.SELECTED_CLASS,!1),a.select(b).classed(c.constants.DESELECTED_CLASS,!1)},d.onClick=function(a){var b=d.keyAccessor()(a);c.events.trigger(function(){d.filter(b),c.redrawAll(d.chartGroup())})},d.filterHandler=function(a){return arguments.length?(H=a,d):H},d.doRender=function(){return d},d.doRedraw=function(){return d},d.legendables=function(){return[]},d.legendHighlight=function(){},d.legendReset=function(){},d.keyAccessor=function(a){return arguments.length?(t=a,d):t},d.valueAccessor=function(a){return arguments.length?(u=a,d):u},d.label=function(a){return arguments.length?(w=a,x=!0,d):w},d.renderLabel=function(a){return arguments.length?(x=a,d):x},d.title=function(a){return arguments.length?(y=a,z=!0,d):y},d.renderTitle=function(a){return arguments.length?(z=a,d):z},d.renderlet=function(a){return C.push(a),d},d.chartGroup=function(a){return arguments.length?(D=a,d):D},d.expireCache=function(){return d},d.legend=function(a){return arguments.length?(q=a,q.parent(d),d):q},d.on=function(a,b){return F[a]=b,d},d},c.marginable=function(a){var b={top:10,right:50,bottom:30,left:30};return a.margins=function(c){return arguments.length?(b=c,a):b},a.effectiveWidth=function(){return a.width()-a.margins().left-a.margins().right},a.effectiveHeight=function(){return a.height()-a.margins().top-a.margins().bottom},a},c.coordinateGridChart=function(b){function d(a){b.elasticX()&&!b.isOrdinal()?x.domain([b.xAxisMin(),b.xAxisMax()]):b.isOrdinal()&&0===x.domain().length&&x.domain(b.computeOrderedGroups().map(function(a){return a.key})),b.isOrdinal()?b.prepareOrdinalXAxis():x.range([0,b.xAxisLength()]),G=G.scale(b.x()).orient("bottom"),e(a)}function e(a){var d=a.selectAll("g."+q);if(S){d.empty()&&(d=a.insert("g",":first-child").attr("class",o+" "+q).attr("transform","translate("+b.yAxisX()+","+b.margins().top+")"));var e=G.tickValues()?G.tickValues():x.ticks(G.ticks()[0]),f=d.selectAll("line").data(e),g=f.enter().append("line").attr("x1",function(a){return x(a)}).attr("y1",b.xAxisY()-b.margins().top).attr("x2",function(a){return x(a)}).attr("y2",0).attr("opacity",0);c.transition(g,b.transitionDuration()).attr("opacity",1),c.transition(f,b.transitionDuration()).attr("x1",function(a){return x(a)}).attr("y1",b.xAxisY()-b.margins().top).attr("x2",function(a){return x(a)}).attr("y2",0),f.exit().remove()}else d.selectAll("line").remove()}function f(c){(void 0===A||b.elasticY())&&(A=a.scale.linear(),A.domain([b.yAxisMin(),b.yAxisMax()]).rangeRound([b.yAxisHeight(),0])),A.range([b.yAxisHeight(),0]),L=L.scale(A).orient("left"),g(c)}function g(a){var d=a.selectAll("g."+p);if(R){var e=L.tickValues()?L.tickValues():A.ticks(L.ticks()[0]);d.empty()&&(d=a.insert("g",":first-child").attr("class",o+" "+p).attr("transform","translate("+b.yAxisX()+","+b.margins().top+")"));var f=d.selectAll("line").data(e),g=f.enter().append("line").attr("x1",1).attr("y1",function(a){return A(a)}).attr("x2",b.xAxisLength()).attr("y2",function(a){return A(a)}).attr("opacity",0);c.transition(g,b.transitionDuration()).attr("opacity",1),c.transition(f,b.transitionDuration()).attr("x1",1).attr("y1",function(a){return A(a)}).attr("x2",b.xAxisLength()).attr("y2",function(a){return A(a)}),f.exit().remove()}else d.selectAll("line").remove()}function h(){return b.xAxisY()-b.margins().top}function i(){var a=b.extendBrush();b.redrawBrush(v),b.brushIsEmpty(a)?c.events.trigger(function(){b.filter(null),c.redrawAll(b.chartGroup())}):c.events.trigger(function(){b.filter(null),b.filter([a[0],a[1]]),c.redrawAll(b.chartGroup())},c.constants.EVENT_DELAY)}function j(){return b.anchorName()+"-clip"}function k(){var a=c.utils.appendOrSelect(u,"defs"),d=c.utils.appendOrSelect(a,"clipPath").attr("id",j()),e=2*X;c.utils.appendOrSelect(d,"rect").attr("width",b.xAxisLength()+e).attr("height",b.yAxisHeight()+e)}function l(){W&&b.root().call(a.behavior.zoom().x(b.x()).scaleExtent(U).on("zoom",function(){b.focus(b.x().domain()),b._invokeZoomedListener(),m()}))}function m(){if(E){var a=b.x().domain();if(V){var d=E.xOriginalDomain(),e=[a[0]<d[0]?a[0]:d[0],a[1]>d[1]?a[1]:d[1]];E.focus(e)}else E.focus(a);E.filter(null),E.filter(a),c.events.trigger(function(){c.redrawAll(b.chartGroup())})}}function n(a){return a instanceof Array&&a.length>1}var o="grid-line",p="horizontal",q="vertical",r="y-axis-label",s="x-axis-label",t=12;b=c.colorChart(c.marginable(c.baseChart(b))),b.colors(a.scale.category10());var u,v,w,x,y,z,A,B,C,D,E,F,G=a.svg.axis(),H=c.units.integers,I=0,J=!1,K=0,L=a.svg.axis(),M=0,N=!1,O=0,P=a.svg.brush(),Q=!0,R=!1,S=!1,T=!1,U=[-10,100],V=!0,W=!1,X=0;return b.title(function(a){return a.data.key+": "+a.data.value}),b.rescale=function(){D=void 0,b.xUnitCount()},b.rangeChart=function(a){return arguments.length?(E=a,E.focusChart(b),b):E},b.zoomScale=function(a){return arguments.length?(U=a,b):U},b.zoomOutRestrict=function(a){return arguments.length?(V=a,b):V},b._generateG=function(a){return u=void 0===a?b.svg():a,v=u.append("g"),w=v.append("g").attr("class","chart-body").attr("transform","translate("+b.margins().left+", "+b.margins().top+")").attr("clip-path","url(#"+j()+")"),v},b.g=function(a){return arguments.length?(v=a,b):v},b.mouseZoomable=function(a){return arguments.length?(W=a,b):W},b.chartBodyG=function(a){return arguments.length?(w=a,b):w},b.x=function(a){return arguments.length?(x=a,y=x.domain(),b):x},b.xOriginalDomain=function(){return y},b.xUnits=function(a){return arguments.length?(H=a,b):H},b.xAxis=function(a){return arguments.length?(G=a,b):G},b.elasticX=function(a){return arguments.length?(J=a,b):J},b.xAxisPadding=function(a){return arguments.length?(I=a,b):I},b.xUnitCount=function(){if(void 0===D){var a=b.xUnits()(b.x().domain()[0],b.x().domain()[1],b.x().domain());D=a instanceof Array?a.length:a}return D},b.isOrdinal=function(){return b.xUnits()===c.units.ordinal},b.prepareOrdinalXAxis=function(a){a||(a=b.xUnitCount());for(var c=[],d=b.xAxisLength()/(a+1),e=d/2,f=0;a>f;f++)c[f]=e,e+=d;x.range(c)},b.renderXAxis=function(a){var d=a.selectAll("g.x");d.empty()&&(d=a.append("g").attr("class","axis x").attr("transform","translate("+b.margins().left+","+b.xAxisY()+")"));var e=a.selectAll("text."+s);e.empty()&&b.xAxisLabel()&&(e=a.append("text").attr("transform","translate("+b.xAxisLength()/2+","+(b.height()-K)+")").attr("class",s).attr("text-anchor","middle").text(b.xAxisLabel())),b.xAxisLabel()&&e.text()!=b.xAxisLabel()&&axisYLab.text(b.xAxisLabel()),c.transition(d,b.transitionDuration()).call(G)},b.xAxisY=function(){return b.height()-b.margins().bottom},b.xAxisLength=function(){return b.effectiveWidth()},b.xAxisLabel=function(a,c){return arguments.length?(z=a,b.margins().bottom-=K,K=void 0===c?t:c,b.margins().bottom+=K,b):z},b.renderYAxis=function(a){var d=a.selectAll("g.y");d.empty()&&(d=a.append("g").attr("class","axis y").attr("transform","translate("+b.yAxisX()+","+b.margins().top+")"));var e=a.selectAll("text."+r);e.empty()&&b.yAxisLabel()&&(e=a.append("text").attr("transform","translate("+O+","+b.yAxisHeight()/2+"),rotate(-90)").attr("class",r).attr("text-anchor","middle").text(b.yAxisLabel())),b.yAxisLabel()&&e.text()!=b.yAxisLabel()&&e.text(b.yAxisLabel()),c.transition(d,b.transitionDuration()).call(L)},b.yAxisX=function(){return b.margins().left},b.yAxisLabel=function(a,c){return arguments.length?(B=a,b.margins().left-=O,O=void 0===c?t:c,b.margins().left+=O,b):B},b.y=function(a){return arguments.length?(A=a,b):A},b.yAxis=function(a){return arguments.length?(L=a,b):L},b.elasticY=function(a){return arguments.length?(N=a,b):N},b.renderHorizontalGridLines=function(a){return arguments.length?(R=a,b):R},b.renderVerticalGridLines=function(a){return arguments.length?(S=a,b):S},b.xAxisMin=function(){var d=a.min(b.group().all(),function(a){return b.keyAccessor()(a)});return c.utils.subtract(d,I)},b.xAxisMax=function(){var d=a.max(b.group().all(),function(a){return b.keyAccessor()(a)});return c.utils.add(d,I)},b.yAxisMin=function(){var d=a.min(b.group().all(),function(a){return b.valueAccessor()(a)});return d=c.utils.subtract(d,M)},b.yAxisMax=function(){var d=a.max(b.group().all(),function(a){return b.valueAccessor()(a)});return d=c.utils.add(d,M)},b.yAxisPadding=function(a){return arguments.length?(M=a,b):M},b.yAxisHeight=function(){return b.effectiveHeight()},b.round=function(a){return arguments.length?(C=a,b):C},c.override(b,"filter",function(a){return arguments.length?(b._filter(a),a?b.brush().extent(a):b.brush().clear(),b):b._filter()}),b.brush=function(a){return arguments.length?(P=a,b):P},b.renderBrush=function(a){if(b.isOrdinal()&&(Q=!1),Q){P.on("brush",i);var c=a.append("g").attr("class","brush").attr("transform","translate("+b.margins().left+","+b.margins().top+")").call(P.x(b.x()));c.selectAll("rect").attr("height",h()),c.selectAll(".resize").append("path").attr("d",b.resizeHandlePath),b.hasFilter()&&b.redrawBrush(a)}},b.extendBrush=function(){var a=P.extent();return b.round()&&(a[0]=a.map(b.round())[0],a[1]=a.map(b.round())[1],v.select(".brush").call(P.extent(a))),a},b.brushIsEmpty=function(a){return P.empty()||!a||a[1]<=a[0]},b.redrawBrush=function(a){if(Q){b.filter()&&b.brush().empty()&&b.brush().extent(b.filter());var c=a.select("g.brush");c.call(b.brush().x(b.x())),c.selectAll("rect").attr("height",h())}b.fadeDeselectedArea()},b.fadeDeselectedArea=function(){},b.resizeHandlePath=function(a){var b=+("e"==a),c=b?1:-1,d=h()/3;return"M"+.5*c+","+d+"A6,6 0 0 "+b+" "+6.5*c+","+(d+6)+"V"+(2*d-6)+"A6,6 0 0 "+b+" "+.5*c+","+2*d+"ZM"+2.5*c+","+(d+8)+"V"+(2*d-8)+"M"+4.5*c+","+(d+8)+"V"+(2*d-8)},b.clipPadding=function(a){return arguments.length?(X=a,b):X},b.doRender=function(){if(void 0===x)throw new c.errors.InvalidStateException("Mandatory attribute chart.x is missing on chart[#"+b.anchorName()+"]");return b.resetSvg(),b.dataSet()&&(b._generateG(),k(),d(b.g()),f(b.g()),b.plotData(),b.renderXAxis(b.g()),b.renderYAxis(b.g()),b.renderBrush(b.g()),l()),b},b.doRedraw=function(){return d(b.g()),f(b.g()),b.plotData(),b.elasticY()&&b.renderYAxis(b.g()),(b.elasticX()||T)&&b.renderXAxis(b.g()),b.redrawBrush(b.g()),b},b.subRender=function(){return b.dataSet()&&b.plotData(),b},b.brushOn=function(a){return arguments.length?(Q=a,b):Q},b.focus=function(a){T=!0,b.x().domain(n(a)?a:b.xOriginalDomain()),b.rescale(),b.redraw(),n(a)||(T=!1)},b.refocused=function(){return T},b.focusChart=function(a){return arguments.length?(F=a,b.on("filtered",function(a){c.events.trigger(function(){F.focus(a.filter()),F.filter(a.filter()),c.redrawAll(a.chartGroup())})}),b):F},b},c.colorChart=function(b){var d=a.scale.category20c(),e=[0,d.range().length],f=function(a){var f=e;"function"==typeof e&&(f=e.call(b));var g=f[0],h=f[1];if(isNaN(a)&&(a=0),!c.utils.isNumber(h))return d(a);var i=b.colors().range().length,j=(h-g)/i,k=Math.abs(Math.min(i-1,Math.round((a-g)/j)));return b.colors()(k)},g=function(a,b){return b};return b.colors=function(c){if(!arguments.length)return d;if(c instanceof Array){d=a.scale.ordinal().range(c);for(var f=[],g=0;g<c.length;++g)f.push(g);d.domain(f)}else d=c;return e=[0,d.range().length],b},b.colorCalculator=function(a){return arguments.length?(f=a,b):f},b.getColor=function(a,b){return f(g(a,b))},b.colorAccessor=function(a){return arguments.length?(g=a,b):g},b.colorDomain=function(a){return arguments.length?(e=a,b):e},b},c.stackableChart=function(b){function d(){var c=[];if(b.x()){var d,e=b.x().domain();if(b.isOrdinal()){var f=a.set(e);d=function(a){return f.has(a.x)}}else d=function(a){return a.x>=e[0]&&a.x<=e[e.length-1]};b.stackLayers().forEach(function(a){a.points.forEach(function(a){d(a)&&c.push(a)})})}else b.stackLayers().forEach(function(a){c=c.concat(a.points)});return c}function e(a,c){return b.getKeyAccessorByIndex(a)(c)}function f(a,c){return b.getValueAccessorByIndex(a)(c)}function g(a,b){for(var c=0;c<a.length;++c){var d=a[c],g=e(b,d),h=f(b,d);l.setDataPoint(b,c,{data:d,x:g,y:h,layer:b})}}var h,i,j,k,l=new c.utils.GroupStack,m=a.layout.stack().offset("zero").order("default").values(function(a){return a.points});return b.stack=function(a,c,d){return arguments.length||l.clear(),"string"==typeof c?b._setGroupName(a,c,d):"function"==typeof c&&(d=c),l.setDefaultAccessor(b.valueAccessor()),l.addGroup(a,d),b.expireCache(),b},b.expireCache=function(){return h=null,i=null,j=null,k=null,b},b.allGroups=function(){if(null===h){h=[],h.push(b.group());for(var a=0;a<l.size();++a)h.push(l.getGroupByIndex(a))}return h},b.allValueAccessors=function(){if(null===i){i=[],i.push(b.valueAccessor());for(var a=0;a<l.size();++a)i.push(l.getAccessorByIndex(a))}return i},b.getValueAccessorByIndex=function(a){return b.allValueAccessors()[a]},b.yAxisMin=function(){var e,f=d();return e=a.min(f,function(a){return a.y+a.y0<a.y0?a.y+a.y0:a.y0}),e=c.utils.subtract(e,b.yAxisPadding())},b.yAxisMax=function(){var e,f=d();return e=a.max(f,function(a){return a.y+a.y0}),e=c.utils.add(e,b.yAxisPadding())},b.allKeyAccessors=function(){if(null===j){j=[],j.push(b.keyAccessor());for(var a=0;a<l.size();++a)j.push(b.keyAccessor())}return j},b.getKeyAccessorByIndex=function(a){return b.allKeyAccessors()[a]},b.xAxisMin=function(){for(var a=null,d=b.allGroups(),e=0;e<d.length;++e){var f=d[e],g=c.utils.groupMin(f,b.getKeyAccessorByIndex(e));(null===a||a>g)&&(a=g)}return c.utils.subtract(a,b.xAxisPadding())},b.xAxisMax=function(){for(var a=null,d=b.allGroups(),e=0;e<d.length;++e){var f=d[e],g=c.utils.groupMax(f,b.getKeyAccessorByIndex(e));(null===a||g>a)&&(a=g)}return c.utils.add(a,b.xAxisPadding())},b.calculateDataPointMatrixForAll=function(){for(var a=b.allGroups(),c=0;c<a.length;++c){var d=a[c],e=d.all();g(e,c)}},b.getChartStack=function(){return l},c.override(b,"valueAccessor",function(a){return arguments.length?(b.expireCache(),b._valueAccessor(a)):b._valueAccessor()}),c.override(b,"keyAccessor",function(a){return arguments.length?(b.expireCache(),b._keyAccessor(a)):b._keyAccessor()}),b.stackLayout=function(a){return arguments.length?(m=a,b):m},b.stackLayers=function(a){return arguments.length?void(k=a):(null===k&&(b.calculateDataPointMatrixForAll(),k=b.stackLayout()(l.toLayers())),k)},b.colorAccessor(function(a){return a.layer||a.index}),b.legendables=function(){var a=[];return h.forEach(function(d,e){a.push(c.utils.createLegendable(b,d,e,b.getValueAccessorByIndex(e)))}),a},b},c.abstractBubbleChart=function(b){var d=.3,e=10;b.BUBBLE_NODE_CLASS="node",b.BUBBLE_CLASS="bubble",b.MIN_RADIUS=10,b=c.colorChart(b),b.renderLabel(!0),b.renderTitle(!1);var f=a.scale.linear().domain([0,100]),g=function(a){return a.r};b.r=function(a){return arguments.length?(f=a,b):f},b.radiusValueAccessor=function(a){return arguments.length?(g=a,b):g},b.rMin=function(){var c=a.min(b.group().all(),function(a){return b.radiusValueAccessor()(a)});return c},b.rMax=function(){var c=a.max(b.group().all(),function(a){return b.radiusValueAccessor()(a)});return c},b.bubbleR=function(a){var c=b.radiusValueAccessor()(a),d=b.r()(c);return(isNaN(d)||0>=c)&&(d=0),d};var h=function(a){return b.label()(a)},i=function(a){return b.bubbleR(a)>e?1:0};b.doRenderLabel=function(a){if(b.renderLabel()){var d=a.select("text");d.empty()&&(d=a.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",b.onClick)),d.attr("opacity",0).text(h),c.transition(d,b.transitionDuration()).attr("opacity",i)}},b.doUpdateLabels=function(a){if(b.renderLabel()){var d=a.selectAll("text").text(h);c.transition(d,b.transitionDuration()).attr("opacity",i)}};var j=function(a){return b.title()(a)};return b.doRenderTitles=function(a){if(b.renderTitle()){var c=a.select("title");c.empty()&&a.append("title").text(j)}},b.doUpdateTitles=function(a){b.renderTitle()&&a.selectAll("title").text(j)},b.minRadiusWithLabel=function(a){return arguments.length?(e=a,b):e},b.maxBubbleRelativeSize=function(a){return arguments.length?(d=a,b):d},b.initBubbleColor=function(a,d){return this[c.constants.NODE_INDEX_NAME]=d,b.getColor(a,d)},b.updateBubbleColor=function(a){return b.getColor(a,this[c.constants.NODE_INDEX_NAME])},b.fadeDeselectedArea=function(){b.selectAll("g."+b.BUBBLE_NODE_CLASS).each(b.hasFilter()?function(a){b.isSelectedNode(a)?b.highlightSelected(this):b.fadeDeselected(this)}:function(){b.resetHighlight(this)})},b.isSelectedNode=function(a){return b.hasFilter(a.key)},b.onClick=function(a){var d=a.key;c.events.trigger(function(){b.filter(d),c.redrawAll(b.chartGroup())})},b},c.pieChart=function(b,d){function e(){if(D.dataSet()){var b=q();x=x?x:a.min([D.width(),D.height()])/2;var c=D.buildArcs(),d=b(D.assembleCappedData());if(y){var e=y.selectAll("g."+A).data(d);f(e,c,d),k(d,c),o(e),p()}}}function f(a,b,c){var d=g(a);h(d,b),i(d),j(c,b)}function g(a){var b=a.enter().append("g").attr("class",function(a,b){return A+" _"+b});return b}function h(a,b){var c=a.append("path").attr("fill",function(a,b){return D.getColor(a,b)}).on("click",v).attr("d",function(a,c){return w(a,c,b)});c.transition().duration(D.transitionDuration()).attrTween("d",t)}function i(a){D.renderTitle()&&a.append("title").text(function(a){return D.title()(a)})}function j(a,b){if(D.renderLabel()){var d=y.selectAll("text."+A).data(a);d.exit().remove();var e=d.enter().append("text").attr("class",function(a,b){return A+" _"+b}).on("click",v);c.transition(e,D.transitionDuration()).attr("transform",function(a){a.innerRadius=D.innerRadius(),a.outerRadius=x;var c=b.centroid(a);return isNaN(c[0])||isNaN(c[1])?"translate(0,0)":"translate("+c+")"}).attr("text-anchor","middle").text(function(a){var b=a.data;return s(b)||r(a)?"":D.label()(a)})}}function k(a,b){l(a,b),m(a,b),n(a)}function l(a,b){var d=y.selectAll("g."+A).data(a).select("path").attr("d",function(a,c){return w(a,c,b)});c.transition(d,D.transitionDuration(),function(a){a.attrTween("d",t)}).attr("fill",function(a,b){return D.getColor(a,b)})}function m(a,b){if(D.renderLabel()){var d=y.selectAll("text."+A).data(a);c.transition(d,D.transitionDuration()).attr("transform",function(a){a.innerRadius=D.innerRadius(),a.outerRadius=x;var c=b.centroid(a);return isNaN(c[0])||isNaN(c[1])?"translate(0,0)":"translate("+c+")"}).attr("text-anchor","middle").text(function(a){var b=a.data;return s(b)||r(a)?"":D.label()(a)})}}function n(a){D.renderTitle()&&y.selectAll("g."+A).data(a).select("title").text(function(a){return D.title()(a)})}function o(a){a.exit().remove()}function p(){D.selectAll("g."+A).each(D.hasFilter()?function(a){D.isSelectedSlice(a)?D.highlightSelected(this):D.fadeDeselected(this)}:function(){D.resetHighlight(this)})}function q(){return a.layout.pie().sort(null).value(function(a){return D.valueAccessor()(a)})}function r(a){var b=a.endAngle-a.startAngle;return isNaN(b)||C>b}function s(a){return 0===D.valueAccessor()(a)}function t(b){b.innerRadius=D.innerRadius();var c=this._current;u(c)&&(c={startAngle:0,endAngle:0});var d=a.interpolate(c,b);return this._current=d(0),function(a){return w(d(a),0,D.buildArcs())}}function u(a){return!a||isNaN(a.startAngle)||isNaN(a.endAngle)}function v(a){D.onClick(a.data)}function w(a,b,c){var d=c(a,b);return d.indexOf("NaN")>=0&&(d="M0,0"),d}var x,y,z=.5,A="pie-slice",B=0,C=z,D=c.capped(c.colorChart(c.baseChart({})));return D.slicesCap=D.cap,D.label(function(a){return D.keyAccessor()(a.data)}),D.renderLabel(!0),D.title(function(a){return D.keyAccessor()(a.data)+": "+D.valueAccessor()(a.data)}),D.transitionDuration(350),D.doRender=function(){return D.resetSvg(),y=D.svg().append("g").attr("transform","translate("+D.cx()+","+D.cy()+")"),e(),D},D.innerRadius=function(a){return arguments.length?(B=a,D):B},D.radius=function(a){return arguments.length?(x=a,D):x},D.cx=function(){return D.width()/2},D.cy=function(){return D.height()/2},D.buildArcs=function(){return a.svg.arc().outerRadius(x).innerRadius(B)},D.isSelectedSlice=function(a){return D.hasFilter(D.keyAccessor()(a.data))},D.doRedraw=function(){return e(),D},D.minAngleForLabel=function(a){return arguments.length?(C=a,D):C},D.anchor(b,d)},c.barChart=function(b,d){function e(a){return c.utils.safeNumber(Math.abs(n.y()(a.y+a.y0)-n.y()(a.y0)))}function f(a,b){var d=a.selectAll("rect.bar").data(b.points);d.enter().append("rect").attr("class","bar").attr("fill",n.getColor).append("title").text(n.title()),n.isOrdinal()&&d.on("click",i),c.transition(d,n.transitionDuration()).attr("x",function(a){var b=n.x()(a.x);return(p||n.isOrdinal())&&(b-=k/2),c.utils.safeNumber(b)}).attr("y",function(a){var b=n.y()(a.y+a.y0);return a.y<0&&(b-=e(a)),c.utils.safeNumber(b)}).attr("width",k).attr("height",function(a){return e(a)}).select("title").text(n.title()),c.transition(d.exit(),n.transitionDuration()).attr("height",0).remove()}function g(){if(void 0===k){var a=n.isOrdinal()?h()+1:h(),b=Math.floor((n.xAxisLength()-(a-1)*o)/a);(1/0==b||isNaN(b)||l>b)&&(b=l),k=b}}function h(){return void 0===j&&(j=n.xUnitCount()),j
}function i(a){n.onClick(a.data)}var j,k,l=1,m=2,n=c.stackableChart(c.coordinateGridChart({})),o=m,p=!1;return c.override(n,"rescale",function(){n._rescale(),j=void 0,k=void 0,h()}),n.plotData=function(){var b=n.chartBodyG().selectAll("g.stack").data(n.stackLayers());g(),b.enter().append("g").attr("class",function(a,b){return"stack _"+b}),b.each(function(b,c){var d=a.select(this);f(d,b,c)}),n.stackLayers(null)},n.fadeDeselectedArea=function(){var a=n.chartBodyG().selectAll("rect.bar"),b=n.brush().extent();if(n.isOrdinal())n.hasFilter()?(a.classed(c.constants.SELECTED_CLASS,function(a){return n.hasFilter(n.keyAccessor()(a.data))}),a.classed(c.constants.DESELECTED_CLASS,function(a){return!n.hasFilter(n.keyAccessor()(a.data))})):(a.classed(c.constants.SELECTED_CLASS,!1),a.classed(c.constants.DESELECTED_CLASS,!1));else if(n.brushIsEmpty(b))a.classed(c.constants.DESELECTED_CLASS,!1);else{var d=b[0],e=b[1];a.classed(c.constants.DESELECTED_CLASS,function(a){var b=n.keyAccessor()(a.data);return d>b||b>=e})}},n.centerBar=function(a){return arguments.length?(p=a,n):p},n.gap=function(a){return arguments.length?(o=a,n):o},n.extendBrush=function(){var a=n.brush().extent();return n.round()&&!p&&(a[0]=a.map(n.round())[0],a[1]=a.map(n.round())[1],n.chartBodyG().select(".brush").call(n.brush().extent(a))),a},n.legendHighlight=function(b){n.select(".chart-body").selectAll("rect.bar").filter(function(){return a.select(this).attr("fill")==b.color}).classed("highlight",!0),n.select(".chart-body").selectAll("rect.bar").filter(function(){return a.select(this).attr("fill")!=b.color}).classed("fadeout",!0)},n.legendReset=function(b){n.selectAll(".chart-body").selectAll("rect.bar").filter(function(){return a.select(this).attr("fill")==b.color}).classed("highlight",!1),n.selectAll(".chart-body").selectAll("rect.bar").filter(function(){return a.select(this).attr("fill")!=b.color}).classed("fadeout",!1)},n.anchor(b,d)},c.lineChart=function(b,d){function e(b,d){var e=a.svg.line().x(function(a){return t.x()(a.x)}).y(function(a){return t.y()(a.y+a.y0)}).interpolate(w).tension(x);n&&e.defined(n),b.append("path").attr("class","line").attr("stroke",t.getColor).attr("fill",t.getColor),c.transition(d.select("path.line"),t.transitionDuration()).attr("d",function(a){return g(e(a.points))})}function f(b,d){if(u){var e=a.svg.area().x(function(a){return t.x()(a.x)}).y(function(a){return t.y()(a.y+a.y0)}).y0(function(a){return t.y()(a.y0)}).interpolate(w).tension(x);n&&e.defined(n),b.append("path").attr("class","area").attr("fill",t.getColor).attr("d",function(a){return g(e(a.points))}),c.transition(d.select("path.area"),t.transitionDuration()).attr("d",function(a){return g(e(a.points))})}}function g(a){return!a||a.indexOf("NaN")>=0?"M0,0":a}function h(b){t.brushOn()||b.each(function(){var b=a.select(this),d=b.select("g."+p);d.empty()&&(d=b.append("g").attr("class",p)),i(d);var e=d.selectAll("circle."+q).data(d.datum().points);e.enter().append("circle").attr("class",q).attr("r",v).attr("fill",t.getColor).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).on("mousemove",function(){var b=a.select(this);j(b),k(b,d)}).on("mouseout",function(){var b=a.select(this);l(b),m(d)}).append("title").text(t.title()),e.attr("cx",function(a){return c.utils.safeNumber(t.x()(a.x))}).attr("cy",function(a){return c.utils.safeNumber(t.y()(a.y+a.y0))}).select("title").text(t.title()),e.exit().remove()})}function i(a){var b=a.select("path."+r).empty()?a.append("path").attr("class",r):a.select("path."+r);b.style("display","none").attr("stroke-dasharray","5,5");var c=a.select("path."+s).empty()?a.append("path").attr("class",s):a.select("path."+s);c.style("display","none").attr("stroke-dasharray","5,5")}function j(a){return a.style("fill-opacity",.8),a.style("stroke-opacity",.8),a}function k(a,b){var c=a.attr("cx"),d=a.attr("cy");b.select("path."+r).style("display","").attr("d","M0 "+d+"L"+c+" "+d),b.select("path."+s).style("display","").attr("d","M"+c+" "+t.yAxisHeight()+"L"+c+" "+d)}function l(a){a.style("fill-opacity",1e-6).style("stroke-opacity",1e-6)}function m(a){a.select("path."+r).style("display","none"),a.select("path."+s).style("display","none")}var n,o=5,p="dc-tooltip",q="dot",r="yRef",s="xRef",t=c.stackableChart(c.coordinateGridChart({})),u=!1,v=o,w="linear",x=.7;return t.transitionDuration(500),t.plotData=function(){var a=t.chartBodyG().selectAll("g.stack").data(t.stackLayers()),b=a.enter().append("g").attr("class",function(a,b){return"stack _"+b});e(b,a),f(b,a),h(a),t.stackLayers(null)},t.interpolate=function(a){return arguments.length?(w=a,t):w},t.tension=function(a){return arguments.length?(x=a,t):x},t.defined=function(a){return arguments.length?(n=a,t):n},t.renderArea=function(a){return arguments.length?(u=a,t):u},t.dotRadius=function(a){return arguments.length?(v=a,t):v},t.legendHighlight=function(b){t.selectAll(".chart-body").selectAll("path").filter(function(){return a.select(this).attr("fill")==b.color}).classed("highlight",!0),t.selectAll(".chart-body").selectAll("path").filter(function(){return a.select(this).attr("fill")!=b.color}).classed("fadeout",!0)},t.legendReset=function(b){t.selectAll(".chart-body").selectAll("path").filter(function(){return a.select(this).attr("fill")==b.color}).classed("highlight",!1),t.selectAll(".chart-body").selectAll("path").filter(function(){return a.select(this).attr("fill")!=b.color}).classed("fadeout",!1)},t.anchor(b,d)},c.dataCount=function(b,d){var e=a.format(",d"),f=c.baseChart({});return f.doRender=function(){return f.selectAll(".total-count").text(e(f.dimension().size())),f.selectAll(".filter-count").text(e(f.group().value())),f},f.doRedraw=function(){return f.doRender()},f.anchor(b,d)},c.dataTable=function(d,e){function f(){var a=n.root().selectAll("tbody").data(g(),function(a){return n.keyAccessor()(a)}),b=a.enter().append("tbody");return b.append("tr").attr("class",m).append("td").attr("class",j).attr("colspan",p.length).html(function(a){return n.keyAccessor()(a)}),a.exit().remove(),b}function g(){i||(i=b.quicksort.by(q));var c=n.dimension().top(o);return a.nest().key(n.group()).sortKeys(r).sortValues(r).entries(i(c,0,c.length))}function h(a){for(var b=a.order().selectAll("tr."+k).data(function(a){return a.values}),c=b.enter().append("tr").attr("class",k),d=0;d<p.length;++d){var e=p[d];c.append("td").attr("class",l+" _"+d).html(function(a){return e(a)})}return b.exit().remove(),b}var i,j="dc-table-label",k="dc-table-row",l="dc-table-column",m="dc-table-group",n=c.baseChart({}),o=25,p=[],q=function(a){return a},r=a.ascending;return n.doRender=function(){return n.selectAll("tbody").remove(),h(f()),n},n.doRedraw=function(){return n.doRender()},n.size=function(a){return arguments.length?(o=a,n):o},n.columns=function(a){return arguments.length?(p=a,n):p},n.sortBy=function(a){return arguments.length?(q=a,n):q},n.order=function(a){return arguments.length?(r=a,n):r},n.anchor(d,e)},c.bubbleChart=function(a,b){function d(a){var b=a.enter().append("g");b.attr("class",i.BUBBLE_NODE_CLASS).attr("transform",k).append("circle").attr("class",function(a,b){return i.BUBBLE_CLASS+" _"+b}).on("click",i.onClick).attr("fill",i.initBubbleColor).attr("r",0),c.transition(a,i.transitionDuration()).attr("r",function(a){return i.bubbleR(a)}).attr("opacity",function(a){return i.bubbleR(a)>0?1:0}),i.doRenderLabel(b),i.doRenderTitles(b)}function e(a){c.transition(a,i.transitionDuration()).attr("transform",k).selectAll("circle."+i.BUBBLE_CLASS).attr("fill",i.updateBubbleColor).attr("r",function(a){return i.bubbleR(a)}).attr("opacity",function(a){return i.bubbleR(a)>0?1:0}),i.doUpdateLabels(a),i.doUpdateTitles(a)}function f(a){a.exit().remove()}function g(a){var b=i.x()(i.keyAccessor()(a));return isNaN(b)&&(b=0),b}function h(a){var b=i.y()(i.valueAccessor()(a));return isNaN(b)&&(b=0),b}var i=c.abstractBubbleChart(c.coordinateGridChart({})),j=!1;i.transitionDuration(750);var k=function(a){return"translate("+g(a)+","+h(a)+")"};return i.elasticRadius=function(a){return arguments.length?(j=a,i):j},i.plotData=function(){j&&i.r().domain([i.rMin(),i.rMax()]),i.r().range([i.MIN_RADIUS,i.xAxisLength()*i.maxBubbleRelativeSize()]);var a=i.chartBodyG().selectAll("g."+i.BUBBLE_NODE_CLASS).data(i.group().all());d(a),e(a),f(a),i.fadeDeselectedArea()},i.renderBrush=function(){},i.redrawBrush=function(){i.fadeDeselectedArea()},i.anchor(a,b)},c.compositeChart=function(b,d){function e(a,b){a._generateG(k.g()),a.g().attr("class",j+" _"+b)}function f(){for(var a=[],b=0;b<l.length;++b)a.push(l[b].yAxisMin());return a}function g(){for(var a=[],b=0;b<l.length;++b)a.push(l[b].yAxisMax());return a}function h(){for(var a=[],b=0;b<l.length;++b)a.push(l[b].xAxisMin());return a}function i(){for(var a=[],b=0;b<l.length;++b)a.push(l[b].xAxisMax());return a}var j="sub",k=c.coordinateGridChart({}),l=[];return k.transitionDuration(500),k.group({}),c.override(k,"_generateG",function(){for(var a=this.__generateG(),b=0;b<l.length;++b){var c=l[b];e(c,b),void 0===c.dimension()&&c.dimension(k.dimension()),void 0===c.group()&&c.group(k.group()),c.chartGroup(k.chartGroup()),c.svg(k.svg()),c.xUnits(k.xUnits()),c.transitionDuration(k.transitionDuration()),c.brushOn(k.brushOn())}return a}),k.plotData=function(){for(var a=0;a<l.length;++a){var b=l[a];void 0===b.g()&&e(b,a),b.x(k.x()),b.y(k.y()),b.xAxis(k.xAxis()),b.yAxis(k.yAxis()),b.plotData(),b.activateRenderlets()}},k.fadeDeselectedArea=function(){for(var a=0;a<l.length;++a){var b=l[a];b.brush(k.brush()),b.fadeDeselectedArea()}},k.compose=function(a){l=a;for(var b=0;b<l.length;++b){var c=l[b];c.height(k.height()),c.width(k.width()),c.margins(k.margins())}return k},k.children=function(){return l},k.yAxisMin=function(){return a.min(f())},k.yAxisMax=function(){return c.utils.add(a.max(g()),k.yAxisPadding())},k.xAxisMin=function(){return c.utils.subtract(a.min(h()),k.xAxisPadding())},k.xAxisMax=function(){return c.utils.add(a.max(i()),k.xAxisPadding())},k.legendables=function(){var a=[];return l.forEach(function(b,d){var e=b.legendables();e.length>1?a.push.apply(a,e):a.push(c.utils.createLegendable(b,b.group(),d,b.valueAccessor()))}),a},k.legendHighlight=function(a){for(var b=0;b<l.length;++b){var c=l[b];c.legendHighlight(a)}},k.legendReset=function(a){for(var b=0;b<l.length;++b){var c=l[b];c.legendReset(a)}},k.anchor(b,d)},c.geoChoroplethChart=function(b,d){function e(a){var b=f();if(g(a)){var c=h(a);n(c,a,b),o(c,a,b)}}function f(){for(var a={},b=p.group().all(),c=0;c<b.length;++c)a[p.keyAccessor()(b[c])]=p.valueAccessor()(b[c]);return a}function g(a){return m(a).keyAccessor}function h(a){var b=p.svg().selectAll(i(a)).classed("selected",function(b){return j(a,b)}).classed("deselected",function(b){return k(a,b)}).attr("class",function(b){var d=m(a).name,e=c.utils.nameToId(m(a).keyAccessor(b)),f=d+" "+e;return j(a,b)&&(f+=" selected"),k(a,b)&&(f+=" deselected"),f});return b}function i(a){return"g.layer"+a+" g."+m(a).name}function j(a,b){return p.hasFilter()&&p.hasFilter(l(a,b))}function k(a,b){return p.hasFilter()&&!p.hasFilter(l(a,b))}function l(a,b){return m(a).keyAccessor(b)}function m(a){return s[a]}function n(b,d,e){var f=b.select("path").attr("fill",function(){var b=a.select(this).attr("fill");return b?b:"none"}).on("click",function(a){return p.onClick(a,d)});c.transition(f,p.transitionDuration()).attr("fill",function(a,b){return p.getColor(e[m(d).keyAccessor(a)],b)})}function o(a,b,c){p.renderTitle()&&a.selectAll("title").text(function(a){var d=l(b,a),e=c[d];return p.title()({key:d,value:e})})}var p=c.colorChart(c.baseChart({}));p.colorAccessor(function(a){return a});var q,r=a.geo.path(),s=[];return p.doRender=function(){p.resetSvg();for(var a=0;a<s.length;++a){var b=p.svg().append("g").attr("class","layer"+a),c=b.selectAll("g."+m(a).name).data(m(a).data).enter().append("g").attr("class",m(a).name);c.append("path").attr("fill","white").attr("d",r),c.append("title"),e(a)}q=!1},p.onClick=function(a,b){var d=m(b).keyAccessor(a);c.events.trigger(function(){p.filter(d),c.redrawAll(p.chartGroup())})},p.doRedraw=function(){for(var a=0;a<s.length;++a)e(a),q&&p.svg().selectAll("g."+m(a).name+" path").attr("d",r);q=!1},p.overlayGeoJson=function(a,b,c){for(var d=0;d<s.length;++d)if(s[d].name==b)return s[d].data=a,s[d].keyAccessor=c,p;return s.push({name:b,data:a,keyAccessor:c}),p},p.projection=function(a){return r.projection(a),q=!0,p},p.geoJsons=function(){return s},p.removeGeoJson=function(a){for(var b=[],c=0;c<s.length;++c){var d=s[c];d.name!=a&&b.push(d)}return s=b,p},p.anchor(b,d)},c.bubbleOverlay=function(b,d){function e(){return j=n.select("g."+k),j.empty()&&(j=n.svg().append("g").attr("class",k)),j}function f(){var a=g();o.forEach(function(b){var d=h(b,a),e=d.select("circle."+m);e.empty()&&(e=d.append("circle").attr("class",m).attr("r",0).attr("fill",n.initBubbleColor).on("click",n.onClick)),c.transition(e,n.transitionDuration()).attr("r",function(a){return n.bubbleR(a)}),n.doRenderLabel(d),n.doRenderTitles(d)})}function g(){var a={};return n.group().all().forEach(function(b){a[n.keyAccessor()(b)]=b}),a}function h(a,b){var d=l+" "+c.utils.nameToId(a.name),e=j.select("g."+c.utils.nameToId(a.name));return e.empty()&&(e=j.append("g").attr("class",d).attr("transform","translate("+a.x+","+a.y+")")),e.datum(b[a.name]),e}function i(){var a=g();o.forEach(function(b){var d=h(b,a),e=d.select("circle."+m);c.transition(e,n.transitionDuration()).attr("r",function(a){return n.bubbleR(a)}).attr("fill",n.updateBubbleColor),n.doUpdateLabels(d),n.doUpdateTitles(d)})}var j,k="bubble-overlay",l="node",m="bubble",n=c.abstractBubbleChart(c.baseChart({})),o=[];return n.transitionDuration(750),n.radiusValueAccessor(function(a){return a.value}),n.point=function(a,b,c){return o.push({name:a,x:b,y:c}),n},n.doRender=function(){return j=e(),n.r().range([n.MIN_RADIUS,n.width()*n.maxBubbleRelativeSize()]),f(),n.fadeDeselectedArea(),n},n.doRedraw=function(){return i(),n.fadeDeselectedArea(),n},n.debug=function(b){if(b){var d=n.select("g."+c.constants.DEBUG_GROUP_CLASS);d.empty()&&(d=n.svg().append("g").attr("class",c.constants.DEBUG_GROUP_CLASS));var e=d.append("text").attr("x",10).attr("y",20);d.append("rect").attr("width",n.width()).attr("height",n.height()).on("mousemove",function(){var b=a.mouse(d.node()),c=b[0]+", "+b[1];e.text(c)})}else n.selectAll(".debug").remove();return n},n.anchor(b,d),n},c.rowChart=function(b,d){function e(){if(!r||s){var b=a.extent(t,y.valueAccessor());b[0]>0&&(b[0]=0),r=a.scale.linear().domain(b).range([0,y.effectiveWidth()]),z.scale(r)}}function f(){var a=q.select("g.axis");e(),a.empty()&&(a=q.append("g").attr("class","axis").attr("transform","translate(0, "+y.effectiveHeight()+")")),c.transition(a,y.transitionDuration()).call(z)}function g(){q.selectAll("g.tick").select("line.grid-line").remove(),q.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-y.effectiveHeight()})}function h(){t=y.assembleCappedData(),f(),g();var a=q.selectAll("g."+x).data(t);i(a),j(a),k(a)}function i(a){var b=a.enter().append("g").attr("class",function(a,b){return x+" _"+b});b.append("rect").attr("width",0),m(b),n(a)}function j(a){a.exit().remove()}function k(a){var b=t.length,d=(y.effectiveHeight()-(b+1)*w)/b,e=a.attr("transform",function(a,b){return"translate(0,"+((b+1)*w+b*d)+")"}).select("rect").attr("height",d).attr("fill",y.getColor).on("click",o).classed("deselected",function(a){return y.hasFilter()?!y.isSelectedRow(a):!1}).classed("selected",function(a){return y.hasFilter()?y.isSelectedRow(a):!1});c.transition(e,y.transitionDuration()).attr("width",function(a){var b=r(r(0)==-1/0?1:0);return Math.abs(b-r(y.valueAccessor()(a)))}).attr("transform",p),l(a),n(a)}function l(a){y.renderTitle()&&(a.selectAll("title").remove(),a.append("title").text(function(a){return y.title()(a)}))}function m(a){y.renderLabel()&&a.append("text").on("click",o)}function n(a){if(y.renderLabel()){var b=a.select("text").attr("x",u).attr("y",v).on("click",o).attr("class",function(a,b){return x+" _"+b}).text(function(a){return y.label()(a)});c.transition(b,y.transitionDuration()).attr("transform",p)}}function o(a){y.onClick(a)}function p(a){var b=r(y.valueAccessor()(a)),c=r(0),d=b>c?c:b;return"translate("+d+",0)"}var q,r,s,t,u=10,v=15,w=5,x="row",y=c.capped(c.marginable(c.colorChart(c.baseChart({})))),z=a.svg.axis().orient("bottom");return y.rowsCap=y.cap,y.doRender=function(){return y.resetSvg(),q=y.svg().append("g").attr("transform","translate("+y.margins().left+","+y.margins().top+")"),h(),y},y.title(function(a){return y.keyAccessor()(a)+": "+y.valueAccessor()(a)}),y.label(function(a){return y.keyAccessor()(a)}),y.x=function(a){return arguments.length?(r=a,y):r},y.doRedraw=function(){return h(),y},y.xAxis=function(){return z},y.gap=function(a){return arguments.length?(w=a,y):w},y.elasticX=function(a){return arguments.length?(s=a,y):s},y.labelOffsetX=function(a){return arguments.length?(u=a,y):u},y.labelOffsetY=function(a){return arguments.length?(v=a,y):v},y.isSelectedRow=function(a){return y.hasFilter(y.keyAccessor()(a))},y.anchor(b,d)},c.legend=function(){function a(){return i+h}var b,c,d=2,e={},f=0,g=0,h=12,i=5;return e.parent=function(a){return arguments.length?(b=a,e):b},e.render=function(){c=b.svg().append("g").attr("class","dc-legend").attr("transform","translate("+f+","+g+")");var e=c.selectAll("g.dc-legend-item").data(b.legendables()).enter().append("g").attr("class","dc-legend-item").attr("transform",function(b,c){return"translate(0,"+c*a()+")"}).on("mouseover",function(a){b.legendHighlight(a)}).on("mouseout",function(a){b.legendReset(a)});e.append("rect").attr("width",h).attr("height",h).attr("fill",function(a){return a.color}),e.append("text").text(function(a){return a.name}).attr("x",h+d).attr("y",function(){return h/2+(this.clientHeight?this.clientHeight:13)/2-2})},e.x=function(a){return arguments.length?(f=a,e):f},e.y=function(a){return arguments.length?(g=a,e):g},e.gap=function(a){return arguments.length?(i=a,e):i},e.itemHeight=function(a){return arguments.length?(h=a,e):h},e},c.capped=function(b){var d=1/0,e="Others",f=function(c){var d=a.sum(c,b.valueAccessor()),f=b.group().all(),g=a.sum(f,b.valueAccessor()),h=c.map(b.keyAccessor()),i=f.map(b.keyAccessor()),j=a.set(h),k=i.filter(function(a){return!j.has(a)});c.push({others:k,key:e,value:g-d})};return b.assembleCappedData=function(){if(1/0==d)return b.computeOrderedGroups();var a=b.group().top(d);return a=b.computeOrderedGroups(a),f&&f(a),a},b.cap=function(a){return arguments.length?(d=a,b):d},b.othersLabel=function(a){return arguments.length?(e=a,b):e},b.othersGrouper=function(a){return arguments.length?(f=a,b):f},c.override(b,"onClick",function(a){a.others&&a.others.forEach(function(a){b.filter(a)}),b._onClick(a)}),b},c.numberDisplay=function(b,d){var e="number-display",f=a.format(".2s"),g=c.baseChart({});return g.dimension({}),g.value=function(){var a=g.group().all&&g.group().all()[0]||g.group().value();return g.valueAccessor()(a)},g.transitionDuration(250),g.doRender=function(){var b=g.value(),c=g.selectAll("."+e);return c.empty()&&(c=c.data([0]).enter().append("span").attr("class",e)),c.transition().duration(g.transitionDuration()).ease("quad-out-in").tween("text",function(){var c=a.interpolateNumber(this.lastValue||0,b);return this.lastValue=b,function(a){this.textContent=g.formatNumber()(c(a))}}),g},g.doRedraw=function(){return g.doRender()},g.formatNumber=function(a){return arguments.length?(f=a,g):f},g.anchor(b,d)},c}if("function"==typeof define&&define.amd)define(["d3","crossfilter"],a);else if("object"==typeof module&&module.exports){var b=require("d3"),c=require("crossfilter");"function"!=typeof c&&(c=c.crossfilter),module.exports=a(b,c)}else this.dc=a(d3,crossfilter)}();
//# sourceMappingURL=dc.min.js.map